<!doctype html>




<html class="theme-next pisces" lang="zh-Hans">
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>






<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />



  <meta name="google-site-verification" content="true" />







  <meta name="baidu-site-verification" content="q1zwhBKKPA" />







  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="DP," />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.1" />






<meta name="description" content="1. 理解动态规划引入例题：triangle 给一个三角形，找到从上到下最短的路径： 123456[     [2],    [3,4],   [6,5,7],  [4,1,8,3]] 最短路径是11 (i.e., 2 + 3 + 5 + 1 = 11). n = 三角形高度 我们用下面几种方法来思考这个题。">
<meta name="keywords" content="DP">
<meta property="og:type" content="article">
<meta property="og:title" content="算法-DP">
<meta property="og:url" content="http://yoursite.com/child/2017/11/17/算法-DP/index.html">
<meta property="og:site_name" content="jiayi797的专栏">
<meta property="og:description" content="1. 理解动态规划引入例题：triangle 给一个三角形，找到从上到下最短的路径： 123456[     [2],    [3,4],   [6,5,7],  [4,1,8,3]] 最短路径是11 (i.e., 2 + 3 + 5 + 1 = 11). n = 三角形高度 我们用下面几种方法来思考这个题。">
<meta property="og:updated_time" content="2017-11-30T12:10:30.903Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="算法-DP">
<meta name="twitter:description" content="1. 理解动态规划引入例题：triangle 给一个三角形，找到从上到下最短的路径： 123456[     [2],    [3,4],   [6,5,7],  [4,1,8,3]] 最短路径是11 (i.e., 2 + 3 + 5 + 1 = 11). n = 三角形高度 我们用下面几种方法来思考这个题。">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: false,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/child/2017/11/17/算法-DP/"/>





  <title>算法-DP | jiayi797的专栏</title><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  




<!-- hexo-inject:begin --><!-- hexo-inject:end --><script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-110169171-1', 'auto');
  ga('send', 'pageview');
</script>


  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?9856596edaab494b299151eb0e9bb214";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>











  
  
    
  

  <div class="container sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">jiayi797的专栏</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            时光机
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            琐碎
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="搜索..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/child/2017/11/17/算法-DP/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="jiayi797">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="jiayi797的专栏">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">算法-DP</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-11-17T20:26:50+08:00">
                2017-11-17
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2017-11-30T20:10:30+08:00">
                2017-11-30
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/算法/" itemprop="url" rel="index">
                    <span itemprop="name">算法</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          
            <span class="post-meta-divider">|</span>
            <span class="page-pv"><i class="fa fa-file-o"></i> 浏览
            <span class="busuanzi-value" id="busuanzi_value_page_pv" ></span>次
            </span>
          

          
            <div class="post-wordcount">
              
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计</span>
                
                <span title="字数统计">
                  8,988
                </span>
              

              

              
            </div>
          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="理解动态规划">1. 理解动态规划</h1><p>引入例题：<strong>triangle</strong></p>
<p>给一个三角形，找到从上到下最短的路径：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">[</div><div class="line">     [2],</div><div class="line">    [3,4],</div><div class="line">   [6,5,7],</div><div class="line">  [4,1,8,3]</div><div class="line">]</div></pre></td></tr></table></figure>
<p>最短路径是<code>11</code> (i.e., 2 + 3 + 5 + 1 = 11).</p>
<p>n = 三角形高度</p>
<p>我们用下面几种方法来思考这个题。</p>
<a id="more"></a>
<h2 id="方法1，DFS遍历">1.1. 方法1，DFS遍历</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">int</span> n;</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">minimumTotal</span><span class="params">(<span class="keyword">int</span>[][] triangle)</span></span>&#123;</div><div class="line">  <span class="keyword">int</span> best = Integer.MAX_VALUE;</div><div class="line">  n = triangle.length;</div><div class="line">  dfs(triangle,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>);</div><div class="line">  <span class="keyword">return</span> best;</div><div class="line">&#125;</div><div class="line"><span class="comment">// sum = root -&gt; x,y ,不包含x,y的路径和</span></div><div class="line"><span class="function"><span class="keyword">public</span> vid <span class="title">dfs</span><span class="params">(<span class="keyword">int</span>[][] triangle,<span class="keyword">int</span> x,<span class="keyword">int</span> y,<span class="keyword">int</span> sum)</span></span>&#123;</div><div class="line">  <span class="keyword">if</span>( x == n )&#123;</div><div class="line">    best = Math.max(best,sum);</div><div class="line">    <span class="keyword">return</span>;</div><div class="line">  &#125;</div><div class="line">  dfs( triangle, x+<span class="number">1</span>, y, sum + triangle[x][y] );</div><div class="line">  dfs( triangle , x+<span class="number">1</span>, y+<span class="number">1</span>, sum + triangle[x][y] );</div><div class="line">  <span class="comment">/**坐标关系</span></div><div class="line">   [2]   -&gt;    [0,0]</div><div class="line">   [3,4]  -&gt;   [1,0],[1,1]</div><div class="line">  **/</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>复杂度：$O(2^n)$</p>
<h2 id="方法2，分治法">1.2. 方法2，分治法</h2><p>没有best全局变量，更好一些。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">divideConquer</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span></span>&#123;</div><div class="line">  <span class="keyword">if</span>( x == n )&#123;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">return</span> A[x][y] + Math.min(</div><div class="line">    divideConquer(x+<span class="number">1</span>,y),</div><div class="line">  	divideConquer(x+<span class="number">1</span>,y+<span class="number">1</span>)</div><div class="line">    );</div><div class="line">&#125;</div><div class="line"></div><div class="line">divideConquer(<span class="number">0</span>,<span class="number">0</span>);</div></pre></td></tr></table></figure>
<p>我们分析一下这个分治的定义：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**分治定义</span></div><div class="line"></div><div class="line">[x,y]表示从x,y出发，到底层的最短距离</div><div class="line"></div><div class="line">  [x,y]</div><div class="line">    ↓    ↘</div><div class="line">[x+1,y] [x+1,y+1]</div><div class="line"></div><div class="line">从[x,y]出发，有两条路：[x+1,y]和[x+1,y+1]，这其实是两个子问题</div><div class="line"></div><div class="line">而[x,y] = Math.min( [x+1,y],[x+1,y+1] ) + A[x,y]</div><div class="line"></div><div class="line">**/</div></pre></td></tr></table></figure>
<p>复杂度：$2^n$</p>
<h2 id="方法3，记忆化搜索">1.3. 方法3，记忆化搜索</h2><p>我们先回头看一下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line">  [x,y]</div><div class="line">    ↓    ↘</div><div class="line">[x+1,y] [x+1,y+1]</div><div class="line"></div><div class="line">   ↓      ↘ ↓       ↘</div><div class="line">[x+2,y] [x+2,y+1] [x+2,y+2]</div><div class="line"></div><div class="line">**/</div></pre></td></tr></table></figure>
<p>我们发现[x+2,y+1]被调用了两次！</p>
<p>就可以用一张哈希表来存储曾经计算过的[x,y]</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">divideConquer</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span></span>&#123;</div><div class="line">  <span class="keyword">if</span>(x == n)&#123;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">  &#125;</div><div class="line">  <span class="comment">//如果之前计算过，就直接返回</span></div><div class="line">  <span class="keyword">if</span>( hash[x][y] != Integer.MAX_VALUE )&#123;</div><div class="line">    <span class="keyword">return</span> hash[x][y];</div><div class="line">  &#125;</div><div class="line">  hash[x][y] =  A[x][y] + Math.min(</div><div class="line">    divideConquer(x+<span class="number">1</span>,y),</div><div class="line">  	divideConquer(x+<span class="number">1</span>,y+<span class="number">1</span>));</div><div class="line">  <span class="keyword">return</span> hash[x][y];</div><div class="line">&#125;</div><div class="line"></div><div class="line">initialize: hash[*][*] = Integer.MAX_VALUE;</div><div class="line">answser: divideConqure(<span class="number">0</span>,<span class="number">0</span>);</div></pre></td></tr></table></figure>
<p>复杂度:$n^2$</p>
<p>解决了重复计算的问题。</p>
<p>记忆化搜索是一种lazy loading模式，需要的时候再去算，算完了存下来。属于自顶向下的计算。</p>
<h2 id="方法4，多重循环">1.4. 方法4，多重循环</h2><p>这是一种很勤劳的模式。就是提前算好所需要的一切，然后再返回。例如：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="number">1</span></div><div class="line"><span class="number">2</span>,<span class="number">3</span></div><div class="line"><span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span></div></pre></td></tr></table></figure>
<p>有两种方式，一种是自顶向下，一种是自底向上。</p>
<h3 id="自顶向下">1.4.1. 自顶向下</h3><p>我们先看一下自顶向下。</p>
<p>我们先计算从1到2、3的最短路径，然后计算从1到4/5/6的最短路径。最后从4/5/6中挑一个最小的。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">f[i][j]表示从顶出发，走到i,j的最小路径长度</div><div class="line"><span class="comment">//初始化</span></div><div class="line">f[<span class="number">0</span>][<span class="number">0</span>] = A[<span class="number">0</span>][<span class="number">0</span>]</div><div class="line"><span class="comment">//初始化三角形的左边和右边</span></div><div class="line"><span class="comment">//最左、右边的所有点，从1出发只有一条路径！</span></div><div class="line"><span class="keyword">for</span>( <span class="keyword">int</span> i = <span class="number">0</span> ; i &lt; n ; ++i)&#123;</div><div class="line">f[i][<span class="number">0</span>] = f[i-<span class="number">1</span>][<span class="number">0</span>] + A[i][<span class="number">0</span>];</div><div class="line">f[i][i] = f[i-<span class="number">1</span>][i-<span class="number">1</span>] + A[i][i];</div><div class="line">&#125;</div><div class="line"><span class="comment">//自顶向下</span></div><div class="line"><span class="keyword">for</span>( <span class="keyword">int</span> i = <span class="number">1</span> ; i &lt; n ; ++i )&#123;</div><div class="line">  <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span> ; j &lt; i ; ++j )&#123;</div><div class="line">	f[i][j] = Math.min(f[i-<span class="number">1</span>][j],f[i-<span class="number">1</span>][j-<span class="number">1</span>]) + A[i][j];</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">return</span> Math.min(f[n-<span class="number">1</span>][<span class="number">0</span>],f[n-<span class="number">1</span>][<span class="number">1</span>],...);</div></pre></td></tr></table></figure>
<h3 id="自底向上">1.4.2. 自底向上</h3><p>接下来看一下自底向上的方式。</p>
<p>我们想要计算1到最底端的最小距离，那就需要知道2和3的。那么就要需要知道4,5,6的。那我们先从4,5,6计算起。属于自底向上的计算。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">A[][]</div><div class="line"></div><div class="line"><span class="comment">//状态定义</span></div><div class="line">f[i][j]表示从i,j出发走到最后一层的最小路径长度</div><div class="line"><span class="comment">//初始化,终点先有值</span></div><div class="line"><span class="keyword">for</span>( <span class="keyword">int</span> i = <span class="number">0</span> ; i &lt; n ; ++i )&#123;</div><div class="line">	f[n-<span class="number">1</span>][i] = A[n-<span class="number">1</span>][i];</div><div class="line">&#125;</div><div class="line"><span class="comment">//循环求解</span></div><div class="line"><span class="keyword">for</span>( <span class="keyword">int</span> i = n - <span class="number">2</span>; i &gt;= <span class="number">0</span> ; --i )&#123;</div><div class="line">  <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span> ; j &lt;= i ; ++j)&#123;</div><div class="line">	f[i][j] = Math.min(f[i+<span class="number">1</span>][j],f[i+<span class="number">1</span>][j+<span class="number">1</span>]) + A[i][j];</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">return</span> f[<span class="number">0</span>][<span class="number">0</span>]</div></pre></td></tr></table></figure>
<h1 id="什么时候用DP">2. 什么时候用DP</h1><p>三个条件满足其一即<strong>有可能</strong>是要用DP：</p>
<ul>
<li>求极值</li>
<li>判断是否可行</li>
<li>统计方案个数</li>
<li>擅长将$2^n-&gt;n^2$</li>
</ul>
<h1 id="什么时候不用DP">3. 什么时候不用DP</h1><p>三个条件满足其一即<strong>有可能</strong>是不用DP：</p>
<ul>
<li>求所有<strong>具体</strong>的方案（输出所有回文串）</li>
<li>输入是<strong>集合</strong>（是无序的），而不是序列（求最长连续序列），背包问题是例外</li>
<li>暴力方法的复杂度已经是多项式级别，不擅长$n^3-&gt;n^2$</li>
</ul>
<h1 id="DP四要素">4. DP四要素</h1><p><strong>状态</strong>：<code>f[][]</code>的含义，<strong>最难</strong>！</p>
<p><strong>方程</strong>：状态之间的联系，怎么用小状态算大状态</p>
<p><strong>初始化</strong>：最小状态是什么，起点</p>
<p><strong>答案</strong>：最大状态是什么，终点</p>
<p><strong>VS递归三要素</strong></p>
<ul>
<li><strong>定义</strong>（状态）<ul>
<li>接受了什么参数</li>
<li>做了什么事情</li>
<li>返回了什么值</li>
</ul>
</li>
<li><strong>拆解</strong>（方程）<ul>
<li>符合将参数变小</li>
</ul>
</li>
<li><strong>出口</strong>（初始化）<ul>
<li>什么时候可以直接return</li>
</ul>
</li>
</ul>
<h1 id="常见DP">5. 常见DP</h1><p><strong>坐标型 15%</strong></p>
<p><strong>序列型 30%</strong></p>
<p><strong>双序列 30%</strong></p>
<p>划分型 10%</p>
<p>背包型 10%</p>
<p>区间型 5%</p>
<h2 id="坐标型（矩阵）DP">5.1. 坐标型（矩阵）DP</h2><p>特点：小人在按照某种方向跳</p>
<p><strong>状态</strong>：</p>
<ul>
<li><code>f[x]</code>：从起点走到坐标x…</li>
<li><code>f[x][y]</code>：从起点走到坐标x,y…</li>
</ul>
<p><strong>方程</strong>：研究走到x,y这个点之前的这一步</p>
<p><strong>初始化</strong>：起点</p>
<p><strong>答案</strong>：重点</p>
<h3 id="例题1：Minimum-Path-Sum">5.1.1. 例题1：Minimum Path Sum</h3><p>题目：从左上走到右下最短距离。只能向右向下走。求最小路径</p>
<p><strong>状态：</strong><code>f[x][y]</code> : 从起点走到x,y的最短路径</p>
<p><strong>方程</strong>：<code>f[x][y] = Math.min(f[x-1][y],f[x][y-1]+A[x][y]</code></p>
<p><strong>初始化</strong>：边界</p>
<p><strong>答案</strong>：<code>f[n][m]</code></p>
<h3 id="例题2，Unique-Paths">5.1.2. 例题2，Unique Paths</h3><p>题目：从左上走到右下最短距离。只能向右向下走。求方案个数。</p>
<p><strong>状态</strong>：<code>f[x][y]</code>：从[0,0]出发，到[x,y]的方案总数</p>
<p><strong>方程</strong>：<code>f[x][y] = f[x-1][y] + f[x][y-1]</code>（需要强调的是，<code>[x-1,y]</code>和<code>[x,y-1]</code>两种方案不会重叠！）</p>
<p><strong>初始化</strong>：第0行、第0列的边界</p>
<p><strong>答案</strong>：<code>f[n][m]</code></p>
<h3 id="例题3，Unique-Paths-II">5.1.3. 例题3，Unique Paths II</h3><p>如果路上有障碍，求方案个数。</p>
<h3 id="例题4，Climbing-Stairs">5.1.4. 例题4，Climbing Stairs</h3><p>有一个楼梯，一步只能跨1/2步。问从0走到n层有多少层方案。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">f[i] -&gt; i位置有多少种</div><div class="line"></div><div class="line">f[i] = f[i-<span class="number">1</span>] + f[i-<span class="number">2</span>] <span class="comment">//要么从i-1来的，要么从i-2来的</span></div><div class="line"></div><div class="line"><span class="comment">//斐波那契数列！</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">climbStairs</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span>( n &lt;= <span class="number">2</span> ) <span class="keyword">return</span> n;</div><div class="line">        <span class="comment">//f[i] : 有i个台阶时的方案个数</span></div><div class="line">        <span class="keyword">int</span>[] f = <span class="keyword">new</span> <span class="keyword">int</span>[n+<span class="number">1</span>];</div><div class="line">        f[<span class="number">1</span>] = <span class="number">1</span>;</div><div class="line">        f[<span class="number">2</span>] = <span class="number">2</span>;</div><div class="line">        <span class="keyword">for</span>( <span class="keyword">int</span> i = <span class="number">3</span>; i &lt;= n ; ++i )&#123;</div><div class="line">            f[i] = f[i-<span class="number">1</span>] + f[i-<span class="number">2</span>];</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> f[n];</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<h3 id="例题5，Jump-Game">5.1.5. 例题5，Jump Game</h3><p>给一个数组A,<code>A[i]</code>表示在这里时最多可以跳<code>A[i]</code>步。只能向前跳。从数组A的第0位置出发，能不能跳到末尾。</p>
<p>这道题有两种解法，一种是DP，一种是贪心。DP会超时，但是思路非常好。</p>
<p>先介绍DP，这个复杂度是$O(n^2)$:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line">* f[i] -&gt; 从0到i是否可达</div><div class="line">*</div><div class="line">* 1,2,...,j,...i</div><div class="line">* </div><div class="line">* 如果j可达，且从j可以跳到i，则i可达，即：看看存不存在一个j，j满足以下两个条件：</div><div class="line">*  1. j可达 --&gt; f[j] == true</div><div class="line">*  2. 从j出发够得到i --&gt; i - j &lt;= A[j]</div><div class="line">**/</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">canJump</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span>( nums.length == <span class="number">0</span> ) <span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">        <span class="keyword">boolean</span>[] f = <span class="keyword">new</span> <span class="keyword">boolean</span>[nums.length];</div><div class="line">        <span class="comment">//初始化</span></div><div class="line">        f[<span class="number">0</span>] = <span class="keyword">true</span>;</div><div class="line">        <span class="keyword">int</span> i,j;</div><div class="line">        <span class="keyword">for</span>( i = <span class="number">1</span> ; i &lt; nums.length ; ++i )&#123;</div><div class="line">            <span class="keyword">for</span>( j = <span class="number">0</span> ; j &lt; i ; ++j )&#123;</div><div class="line">                <span class="keyword">if</span>( f[j] &amp;&amp; i - j &lt;= nums[j] )&#123; <span class="comment">// j可达，且从j可以跳到i</span></div><div class="line">                    f[i] = <span class="keyword">true</span>;</div><div class="line">                    <span class="keyword">break</span>;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> f[nums.length - <span class="number">1</span>];</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<p>再介绍贪心的思路，这个复杂度是$O(n)$</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line">维护两个东西：</div><div class="line">	1. 到目前为止能跳到的最远距离（全局）</div><div class="line">	2. 从当前一步出发能跳到的最远距离（局部）</div><div class="line"></div><div class="line">全局最优 global = Math.max(global, local)</div><div class="line"></div><div class="line">局部最优 local = A[i]+i</div><div class="line"></div><div class="line">**/ </div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">canJump</span><span class="params">(<span class="keyword">int</span>[] A)</span> </span>&#123;</div><div class="line">  <span class="comment">// think it as merging n intervals</span></div><div class="line">  <span class="keyword">if</span> (A == <span class="keyword">null</span> || A.length == <span class="number">0</span>) &#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">int</span> global = A[<span class="number">0</span>];</div><div class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; A.length; i++) &#123;</div><div class="line">    <span class="keyword">if</span> (i &lt;= global &amp;&amp; A[i] + i &gt;= global) &#123;</div><div class="line">      global = A[i] + i;</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">return</span> global &gt;= A.length - <span class="number">1</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="例题6，Jump-Game-II">5.1.6. 例题6，Jump Game II</h3><p>给一个数组A,<code>A[i]</code>表示在这里时最多可以跳<code>A[i]</code>步。只能向前跳。从数组A的第0位置出发，问最少的跳的次数。</p>
<p>这道题还是有两个思路，一个DP，一个贪心。我们先介绍一下DP，虽然DP会超时：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"></div><div class="line">f[i] : 从起点出发，跳到i最少需要几步</div><div class="line"></div><div class="line">          |---&gt;i-j&lt;---|</div><div class="line">1,3,.....,|j,.......,i|</div><div class="line"></div><div class="line">如果j可达i（即i - j &lt;= nums[j]），则 f[i] = min ( f[j] + 1 )</div><div class="line"></div><div class="line">**/</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">jump</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</div><div class="line">  <span class="keyword">if</span>( nums.length == <span class="number">0</span> ) <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">  <span class="comment">//状态：f[i] -&gt; 从0到i最少的跳跃次数</span></div><div class="line">  <span class="keyword">int</span>[] f = <span class="keyword">new</span> <span class="keyword">int</span>[nums.length];</div><div class="line">  <span class="comment">//初始化</span></div><div class="line">  f[<span class="number">0</span>] = <span class="number">0</span>;</div><div class="line">  <span class="keyword">int</span> i,j;</div><div class="line">  <span class="keyword">for</span>( i = <span class="number">1</span> ; i &lt; nums.length ; ++i )&#123;</div><div class="line">    f[i] = Integer.MAX_VALUE;</div><div class="line">    <span class="keyword">for</span>( j = <span class="number">0</span> ; j &lt; i ; ++j )&#123;</div><div class="line">      <span class="keyword">if</span>( i - j &lt;= nums[j] )&#123;</div><div class="line">        f[i] = Math.min(f[i],f[j]+<span class="number">1</span>);</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">return</span> f[nums.length - <span class="number">1</span>];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>第二种思路，贪心：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line">思路：</div><div class="line"></div><div class="line">要记录</div><div class="line">最远能覆盖到的地方 -&gt; curr</div><div class="line">已经覆盖的地方 -&gt; last</div><div class="line">当前所使用跳数 -&gt; ret</div><div class="line"></div><div class="line">扫描以确定当前最远能覆盖的节点，放入curr。</div><div class="line">然后继续扫描，直到当前的路程超过了上一次算出的覆盖范围，那么更新覆盖范围，同时更新条数，因为我们是经过了多一跳才能继续前进的</div><div class="line"></div><div class="line">比如就是我们题目中的[2,3,1,1,4]。初始状态是这样的：cur表示最远能覆盖到的地方，用框里表示。last表示已经覆盖的地方。它们都指在第一个元素上。</div><div class="line">==============================================================</div><div class="line">cur</div><div class="line">-↓-</div><div class="line"> 2 |	3	1	1	4</div><div class="line">-↑-</div><div class="line">last</div><div class="line">==============================================================</div><div class="line"></div><div class="line">第一元素告诉cur，最远可以走两步，于是：</div><div class="line">            cur</div><div class="line">-------------↓-</div><div class="line"> 2     3     1 |	1	4</div><div class="line">-↑-------------</div><div class="line">last</div><div class="line">==============================================================</div><div class="line"></div><div class="line">下一循环中，i指向1（即上面的3）。发现i小于last能到的范围，于是更新last，步数ret+1，同时也要更新cur，因为我们发现更远的距离</div><div class="line">      i=1               cur</div><div class="line">-------↓-----------------↓-</div><div class="line"> 2     3     1     1	4 |</div><div class="line">-------------↑-------------</div><div class="line">           last</div><div class="line">==============================================================</div><div class="line"></div><div class="line">接下来i继续前进，发现i还在当前的实例范围内，无需更新last和步数ret，只需要更新curr</div><div class="line">            i=2         cur</div><div class="line">-------------↓-----------↓-</div><div class="line"> 2     3     1     1	4 |</div><div class="line">-------------↑-------------</div><div class="line">          last = 2</div><div class="line">==============================================================</div><div class="line"></div><div class="line">i继续前进，接下来发现超过当前势力范围，更新last和步数。cur已然最大了。</div><div class="line">                  i=3   cur</div><div class="line">-------------------↓-----↓-</div><div class="line"> 2     3     1     1	4 |</div><div class="line">-------------------------↑-</div><div class="line">                     last = 4</div><div class="line">==============================================================</div><div class="line"></div><div class="line">最后，i到最后一个元素，依然在last的势力范围内，遍历完成，返回ret。</div><div class="line">                     i=cur=4</div><div class="line">-------------------------↓-</div><div class="line"> 2     3     1     1	4 |</div><div class="line">-------------------------↑-</div><div class="line">                     last = 4</div><div class="line">==============================================================</div><div class="line">**/</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">jump</span><span class="params">(<span class="keyword">int</span> A[], <span class="keyword">int</span> n)</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span> ret = <span class="number">0</span>;</div><div class="line">        <span class="keyword">int</span> last = <span class="number">0</span>;</div><div class="line">        <span class="keyword">int</span> curr = <span class="number">0</span>;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</div><div class="line">          <span class="comment">//需要进行下次跳跃，则更新last和当执行的跳数ret</span></div><div class="line">            <span class="keyword">if</span> (i &gt; last) &#123;</div><div class="line">                last = curr;</div><div class="line">                ++ret;</div><div class="line">            &#125;</div><div class="line">          	<span class="comment">//最远能覆盖到的地方</span></div><div class="line">            curr = max(curr, i+A[i]);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">return</span> ret;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="例题7，Longest-Increasing-Subsequence">5.1.7. 例题7，Longest Increasing Subsequence</h3><p>求最长严格递增的子序列（子序列：可以跳着选）</p>
<p>例如给<code>[5,4,1,2,3]</code>,最长的LIS就是<code>1,2,3</code></p>
<p>可以用DP——$n^2$，也可以用二分——$nlogn$。我们先介绍一下DP</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line"><span class="number">5</span>,<span class="number">4</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span></div><div class="line">理解为：</div><div class="line">  <span class="number">5</span></div><div class="line">|---| <span class="number">4</span></div><div class="line">|   |---|         <span class="number">3</span></div><div class="line">|   |   |     <span class="number">2</span> |---|</div><div class="line">|   |   | <span class="number">1</span> |---|   |</div><div class="line">|   |   |---|   |   | </div><div class="line">  <span class="number">5</span>   <span class="number">4</span>   <span class="number">1</span>   <span class="number">2</span>   <span class="number">3</span>   的楼梯，目的是从某个木桩出发，从低到高，看能踩多少个木桩</div><div class="line"></div><div class="line">f[i] : （从任意某个木桩）跳到第i个木桩，最多能踩过多少个桩</div><div class="line"></div><div class="line">方程 ：f[i] = max&#123; f[j] + <span class="number">1</span> &#125; , j 必须满足 j &lt; i &amp;&amp; nums[j] &lt;= nums[i]</div><div class="line"></div><div class="line">初始化：f[i] = <span class="number">1</span> <span class="comment">//每个格子对于自己来说都可达</span></div><div class="line"></div><div class="line">答案： Max(f[<span class="number">0</span>],f[<span class="number">1</span>],...,[n-<span class="number">1</span>])</div><div class="line">  </div><div class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">lengthOfLIS</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</div><div class="line">  <span class="comment">//f[i] -&gt; 跳到当前i时，最多可以跳的次数</span></div><div class="line">  <span class="keyword">int</span>[] f = <span class="keyword">new</span> <span class="keyword">int</span>[nums.length];</div><div class="line">  <span class="comment">//初始化</span></div><div class="line">  <span class="keyword">int</span> i,j;</div><div class="line">  <span class="comment">// 这个其实可以放到最后再+1</span></div><div class="line">  <span class="comment">//        for( i = 0 ; i &lt; nums.length ; ++i)&#123;</span></div><div class="line">  <span class="comment">//            f[i] = 1;</span></div><div class="line">  <span class="comment">//        &#125;</span></div><div class="line">  <span class="comment">//开始</span></div><div class="line">  <span class="keyword">for</span>( i = <span class="number">0</span> ; i &lt; nums.length ; ++i )&#123;</div><div class="line">    <span class="keyword">for</span>( j = <span class="number">0</span> ; j &lt; i ; ++j )&#123;</div><div class="line">      <span class="keyword">if</span>( nums[j] &lt; nums[i] ) &#123;</div><div class="line">        f[i] = Math.max(f[i],f[j]+<span class="number">1</span>);</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">  <span class="comment">//结果 j = max&#123;f[i]&#125;</span></div><div class="line">  j = -<span class="number">1</span>;</div><div class="line">  <span class="keyword">for</span>( i = <span class="number">0</span> ; i &lt; f.length ; ++i )&#123;</div><div class="line">    j = Math.max(j,f[i]);</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">return</span> j+<span class="number">1</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>接下来我们看看二分这个骚操作：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div></pre></td><td class="code"><pre><div class="line">tail[i] -&gt; 长度为i+<span class="number">1</span>的LIS的【最小】末尾是tail[i]</div><div class="line">以nums = [<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">3</span>]为例：</div><div class="line"></div><div class="line">len = <span class="number">1</span>   :      [<span class="number">4</span>], [<span class="number">5</span>], [<span class="number">6</span>], [<span class="number">3</span>]   =&gt; tails[<span class="number">0</span>] = <span class="number">3</span></div><div class="line">len = <span class="number">2</span>   :      [<span class="number">4</span>, <span class="number">5</span>], [<span class="number">5</span>, <span class="number">6</span>]       =&gt; tails[<span class="number">1</span>] = <span class="number">5</span></div><div class="line">len = <span class="number">3</span>   :      [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]            =&gt; tails[<span class="number">2</span>] = <span class="number">6</span></div><div class="line"></div><div class="line">此时如果后面又来了一个x</div><div class="line"></div><div class="line">(<span class="number">1</span>) 如果x大于所有tails，那就把这个x放在这个里面，并把长度+<span class="number">1</span></div><div class="line">(<span class="number">2</span>) 如果tails[i-<span class="number">1</span>] &lt; x &lt;= tails[i], 更新 tails[i]</div><div class="line"></div><div class="line">size -&gt; 当前最长序列长度</div><div class="line">序[<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>]</div><div class="line">以[<span class="number">2</span>,<span class="number">1</span>,<span class="number">5</span>,<span class="number">3</span>,<span class="number">6</span>,<span class="number">4</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">7</span>]为例：</div><div class="line"></div><div class="line"></div><div class="line">i = <span class="number">0</span> --&gt; x = <span class="number">2</span>, tail = [<span class="number">2</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>]  -&gt; size = <span class="number">1</span></div><div class="line">[<span class="number">2</span>]   --&gt; 子序列 <span class="number">2</span></div><div class="line">  </div><div class="line">i = <span class="number">1</span> --&gt; x = <span class="number">1</span>, tail = [<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>]  -&gt; size = <span class="number">1</span></div><div class="line">[<span class="number">2</span>,<span class="number">1</span>] --&gt; 子序列[<span class="number">1</span>]</div><div class="line"></div><div class="line">i = <span class="number">2</span>   --&gt; x = <span class="number">5</span>, tail = [<span class="number">1</span>,<span class="number">5</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>]  -&gt; size = <span class="number">2</span></div><div class="line">[<span class="number">2</span>,<span class="number">1</span>,<span class="number">5</span>] --&gt; 子序列[<span class="number">1</span>,<span class="number">5</span>]</div><div class="line"></div><div class="line">i = <span class="number">3</span>    --&gt; x = <span class="number">3</span>, tail = [<span class="number">1</span>,<span class="number">3</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>]  -&gt; size = <span class="number">2</span></div><div class="line">[<span class="number">2</span>,<span class="number">1</span>,<span class="number">5</span>,<span class="number">3</span>] --&gt; 子序列[<span class="number">1</span>,<span class="number">3</span>]</div><div class="line"></div><div class="line">i = <span class="number">4</span>       --&gt; x = <span class="number">6</span>, tail = [<span class="number">1</span>,<span class="number">3</span>,<span class="number">6</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>]  -&gt; size = <span class="number">3</span></div><div class="line">[<span class="number">2</span>,<span class="number">1</span>,<span class="number">5</span>,<span class="number">3</span>,<span class="number">6</span>] --&gt; 子序列[<span class="number">1</span>,<span class="number">3</span>,<span class="number">6</span>]</div><div class="line"></div><div class="line">i = <span class="number">5</span>         --&gt; x = <span class="number">4</span>, tail = [<span class="number">1</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>]  -&gt; size = <span class="number">3</span></div><div class="line">[<span class="number">2</span>,<span class="number">1</span>,<span class="number">5</span>,<span class="number">3</span>,<span class="number">6</span>,<span class="number">4</span>] --&gt; 子序列[<span class="number">1</span>,<span class="number">3</span>,<span class="number">4</span>]</div><div class="line"></div><div class="line">i = <span class="number">6</span>           --&gt; x = <span class="number">8</span>, tail = [<span class="number">1</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">8</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>]  -&gt; size = <span class="number">4</span></div><div class="line">[<span class="number">2</span>,<span class="number">1</span>,<span class="number">5</span>,<span class="number">3</span>,<span class="number">6</span>,<span class="number">4</span>,<span class="number">8</span>] --&gt; 子序列[<span class="number">1</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">8</span>]</div><div class="line"></div><div class="line">i = <span class="number">7</span>             --&gt; x = <span class="number">9</span>, tail = [<span class="number">1</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>]  -&gt; size = <span class="number">4</span></div><div class="line">[<span class="number">2</span>,<span class="number">1</span>,<span class="number">5</span>,<span class="number">3</span>,<span class="number">6</span>,<span class="number">4</span>,<span class="number">8</span>,<span class="number">9</span>] --&gt; 子序列[<span class="number">1</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">8</span>,<span class="number">9</span>]</div><div class="line"></div><div class="line">i = <span class="number">8</span>               --&gt; x = <span class="number">7</span>, tail = [<span class="number">1</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">7</span>,<span class="number">9</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>]  -&gt; size = <span class="number">4</span></div><div class="line">[<span class="number">2</span>,<span class="number">1</span>,<span class="number">5</span>,<span class="number">3</span>,<span class="number">6</span>,<span class="number">4</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">7</span>] --&gt; 子序列[<span class="number">1</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">7</span>,<span class="number">9</span>]</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">lengthOfLIS</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</div><div class="line">    <span class="keyword">int</span>[] tails = <span class="keyword">new</span> <span class="keyword">int</span>[nums.length];</div><div class="line">    <span class="keyword">int</span> size = <span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> x : nums) &#123;</div><div class="line">        <span class="keyword">int</span> i = <span class="number">0</span>, j = size;</div><div class="line">        <span class="comment">//用二分在tails中寻找一个位置，将x安顿一下</span></div><div class="line">        <span class="keyword">while</span> (i != j) &#123;</div><div class="line">            <span class="keyword">int</span> m = (i + j) / <span class="number">2</span>;</div><div class="line">            <span class="keyword">if</span> (tails[m] &lt; x)</div><div class="line">                i = m + <span class="number">1</span>;</div><div class="line">            <span class="keyword">else</span></div><div class="line">                j = m;</div><div class="line">        &#125;</div><div class="line">        tails[i] = x;</div><div class="line">        <span class="keyword">if</span> (i == size) ++size;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> size;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="Arithmetic-Slices">5.1.8. Arithmetic Slices</h3><p>给一个序列。求这个序列有多少个等差数列（至少三个元素才算等差数列）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// times[i] : 长度为i的等差序列可以构成多少个等差序列</span></div><div class="line"><span class="keyword">int</span>[] times;</div><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">getTimes</span><span class="params">( <span class="keyword">int</span> i )</span></span>&#123;</div><div class="line">  <span class="keyword">if</span>( i &lt; <span class="number">2</span> ) <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">  <span class="keyword">if</span>( times[i] &gt; <span class="number">0</span> )&#123;</div><div class="line">    <span class="keyword">return</span> times[i];</div><div class="line">  &#125;</div><div class="line">  <span class="comment">// function</span></div><div class="line">  times[i] = getTimes(i-<span class="number">1</span>) + i - <span class="number">2</span>;</div><div class="line">  <span class="keyword">return</span> times[i];</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">numberOfArithmeticSlices</span><span class="params">(<span class="keyword">int</span>[] A)</span> </span>&#123;</div><div class="line">  <span class="keyword">int</span> n = A.length;</div><div class="line">  <span class="keyword">if</span>( n &lt; <span class="number">3</span> )<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">  times = <span class="keyword">new</span> <span class="keyword">int</span>[n+<span class="number">1</span>];</div><div class="line">  times[<span class="number">3</span>] = <span class="number">1</span>;</div><div class="line">  <span class="keyword">int</span> last = A[<span class="number">1</span>] - A[<span class="number">0</span>],now;</div><div class="line">  <span class="keyword">int</span> result = <span class="number">0</span> ;</div><div class="line">  <span class="keyword">int</span> sameCount = <span class="number">2</span> ;</div><div class="line">  <span class="keyword">for</span>( <span class="keyword">int</span> i = <span class="number">2</span> ; i &lt; n ; ++i )&#123;</div><div class="line">    now = A[i] - A[i-<span class="number">1</span>];</div><div class="line">    <span class="keyword">if</span>( now == last )&#123;</div><div class="line">      ++sameCount;</div><div class="line">    &#125;<span class="keyword">else</span>&#123;</div><div class="line">      <span class="keyword">if</span>( sameCount &gt;= <span class="number">3</span> )&#123;result += getTimes(sameCount);&#125;</div><div class="line">      sameCount = <span class="number">2</span>;</div><div class="line">      last = now;</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">if</span>( sameCount &gt;= <span class="number">3</span> )&#123;result += getTimes(sameCount);&#125;</div><div class="line">  <span class="keyword">return</span> result;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>###　Perfect Squares</p>
<p>给一个数字，求它被拆成平方和的最少平方和个数。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line">状态 f[i] : 数字i被拆成平方和的最少个数</div><div class="line"></div><div class="line"><span class="number">1</span>,.....,j*j,.....i</div><div class="line"></div><div class="line">方程：</div><div class="line">f[i] = min ( f[i-j^<span class="number">2</span>] + <span class="number">1</span> )</div><div class="line"></div><div class="line">代码：</div><div class="line"><span class="comment">// nums[i] : 数字i被拆成平方和的最少个数</span></div><div class="line"><span class="keyword">int</span>[] nums;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">dp</span><span class="params">(<span class="keyword">int</span> number)</span></span>&#123;</div><div class="line">  <span class="keyword">if</span>( number &lt;= <span class="number">1</span> )&#123;</div><div class="line">    <span class="keyword">return</span> number;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="keyword">if</span>( nums[number] &gt; <span class="number">0</span> )&#123;</div><div class="line">    <span class="keyword">return</span> nums[number];</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="comment">// a = n - i^2</span></div><div class="line">  <span class="keyword">int</span> a;</div><div class="line">  nums[number] = number;</div><div class="line">  <span class="keyword">for</span>( <span class="keyword">int</span> i = <span class="number">1</span> ; i &lt; number ; ++i )&#123;</div><div class="line">    a = number - i*i;</div><div class="line">    <span class="keyword">if</span>(a &lt; <span class="number">0</span> )&#123; <span class="keyword">break</span>;&#125;</div><div class="line">    <span class="keyword">if</span>( a == <span class="number">0</span> )&#123;</div><div class="line">      nums[number] = <span class="number">1</span>;</div><div class="line">      <span class="keyword">break</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">else</span> &#123;</div><div class="line">      <span class="comment">// 方程</span></div><div class="line">      nums[number] = Math.min(nums[number], <span class="number">1</span> + dp(a));</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">return</span> nums[number];</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">numSquares</span><span class="params">(<span class="keyword">int</span> n)</span></span>&#123;</div><div class="line">  nums = <span class="keyword">new</span> <span class="keyword">int</span>[n+<span class="number">1</span>];</div><div class="line">  nums[<span class="number">0</span>] = <span class="number">0</span>;</div><div class="line">  nums[<span class="number">1</span>] = <span class="number">1</span>;</div><div class="line">  <span class="keyword">return</span> dp(n);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="单序列型动态规划">5.2. 单序列型动态规划</h2><p><strong>状态</strong>：<code>f[i]</code>表示<strong>前i个</strong>位置/数字/字符，第i个…</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">   前i个位置</div><div class="line">|-------------|</div><div class="line">|<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,...,i|...,n</div><div class="line">|-------------|</div></pre></td></tr></table></figure>
<p><strong>方程</strong>：<code>f[i] = f[j]</code>…,j是i之前的一个位置</p>
<p><strong>初始化</strong>：<code>f[0]</code>…</p>
<p><strong>答案</strong>：<code>f[n]</code>…</p>
<p>一般answer是<code>f[n]</code>而不是<code>f[n-1]</code>：因为对于n个字符，包含前0个字符（空串）、前1个字符、…、前n个字符</p>
<p>因此<code>f[]</code>一般都要开<code>n+1</code>个</p>
<h3 id="例题1，Word-Break">5.2.1. 例题1，Word Break</h3><p>给一个词<code>lintcode</code>，和一个字典<code>dict=[&quot;lint&quot;,&quot;code&quot;]</code>，这个词能不能被词拆分成词典中的词→<code>lint code</code></p>
<p>暴力方法：递归搜索复杂度→$2^n$</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line">状态：f[i]表示前i个字符能不能被切成dict中的词</div><div class="line">  </div><div class="line">^表示字符串开始</div><div class="line"></div><div class="line">idx → <span class="number">0</span> <span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span> <span class="number">6</span> <span class="number">7</span> <span class="number">8</span></div><div class="line">f   → <span class="number">1</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">1</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">1</span> ← <span class="number">1</span>=<span class="keyword">true</span>,<span class="number">0</span>=<span class="keyword">false</span></div><div class="line">s   → ^ l i n t c o d e</div><div class="line"></div><div class="line">计算步骤：</div><div class="line">i = <span class="number">4</span>,lint: </div><div class="line">lin + t -&gt; ×</div><div class="line">li  + nt -&gt; ×</div><div class="line">l   + <span class="keyword">int</span> -&gt; ×</div><div class="line"><span class="string">''</span>  + lint -&gt; √</div><div class="line"></div><div class="line">i = <span class="number">8</span>,lintcode：</div><div class="line">lintcod + e</div><div class="line">lintco + de</div><div class="line">lintc + ode</div><div class="line">lint + code -&gt; √</div><div class="line"></div><div class="line"></div><div class="line">f[<span class="number">0</span>] = <span class="keyword">true</span>;</div><div class="line"></div><div class="line">|=======前i个位置=======|</div><div class="line">  </div><div class="line">|------------|---------|</div><div class="line">|<span class="number">1</span>,<span class="number">2</span>,......,j|j+<span class="number">1</span>,...,i|</div><div class="line">|------------|---------|</div><div class="line"> 在j位置切一刀，如果<span class="number">1</span>~j能被完美切分，那<span class="number">1</span>~i就取决于j+<span class="number">1</span>~j能不能被完美切分</div><div class="line"></div><div class="line"><span class="keyword">for</span>( <span class="keyword">int</span> i = <span class="number">1</span> ; i &lt;= n ; ++i )&#123;</div><div class="line">  <span class="keyword">for</span>( <span class="keyword">int</span> j = <span class="number">1</span>; j &lt; i ; ++j )&#123;</div><div class="line">  <span class="comment">// s[j~i]的操作是O(n)的！</span></div><div class="line">  <span class="comment">// in dict操作也是O(n)的！因为是单词的hash表，要依次比较的哇</span></div><div class="line">  <span class="keyword">if</span>(f[j] &amp;&amp; s[j~i] in dict )&#123;</div><div class="line">  		f[i] = <span class="keyword">true</span>;</div><div class="line">  		<span class="keyword">break</span>;</div><div class="line">  	&#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>时间复杂度：$O(n^3)$</p>
<p><strong>优化</strong></p>
<p>利用单词平均长度（单词不会很长）– L ,从后往前哇！</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">i = <span class="number">4</span>,lint: </div><div class="line"><span class="string">''</span>  + lint -&gt; √</div><div class="line"></div><div class="line">i = <span class="number">8</span>,lintcode：</div><div class="line">l + intcode</div><div class="line">li + ntcode</div><div class="line">lin + tcode</div><div class="line">lint + code -&gt; √</div><div class="line"></div><div class="line"><span class="keyword">for</span>( <span class="keyword">int</span> i = <span class="number">1</span> ; i &lt;= n ; ++i )&#123;</div><div class="line">  <span class="keyword">for</span>( <span class="keyword">int</span> j = i-<span class="number">1</span>; j &gt;= <span class="number">0</span> ; --j )&#123;</div><div class="line">  <span class="keyword">if</span>(f[j] &amp;&amp; s[j~i] in dict )&#123;</div><div class="line">  		f[i] = <span class="keyword">true</span>;</div><div class="line">  		<span class="keyword">break</span>;</div><div class="line">  	&#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">n：词长度</div><div class="line">m：词典单词个数</div><div class="line">L：单词平均长度</div></pre></td></tr></table></figure>
<p>时间复杂度：$O(n\times L^2 + m)$</p>
<p>最终我采用的方案是：用trie给dict建树，搜索时从后往前搜索</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Node</span></span>&#123;</div><div class="line">        Node[] children;</div><div class="line">        <span class="keyword">boolean</span> hasWord;</div><div class="line">        Node()&#123;</div><div class="line">            children = <span class="keyword">new</span> Node[<span class="number">26</span>];</div><div class="line">            hasWord = <span class="keyword">false</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Trie</span></span>&#123;</div><div class="line">  Node root;</div><div class="line">  Trie()&#123;</div><div class="line">    root = <span class="keyword">new</span> Node();</div><div class="line">  &#125;</div><div class="line">  <span class="comment">// 添加节点</span></div><div class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(String s)</span></span>&#123;</div><div class="line">    Node r = <span class="keyword">this</span>.root;</div><div class="line">    <span class="keyword">int</span> index;</div><div class="line">    <span class="keyword">for</span>( <span class="keyword">char</span> c : s.toCharArray() )&#123;</div><div class="line">      index = c - <span class="string">'a'</span>;</div><div class="line">      <span class="keyword">if</span>(<span class="keyword">null</span> == r.children[index])&#123;</div><div class="line">        r.children[index] = <span class="keyword">new</span> Node();</div><div class="line">      &#125;</div><div class="line">      r = r.children[index];</div><div class="line">    &#125;</div><div class="line">    r.hasWord = <span class="keyword">true</span>;</div><div class="line">  &#125;</div><div class="line">  <span class="comment">//优化后的搜索</span></div><div class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">search</span><span class="params">(<span class="keyword">char</span>[] s,<span class="keyword">int</span> start,<span class="keyword">int</span> end)</span></span>&#123;</div><div class="line">    Node r = <span class="keyword">this</span>.root;</div><div class="line">    <span class="keyword">int</span> index,count = <span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = start ; i &lt; end ; ++i )&#123;</div><div class="line">      index = s[i] - <span class="string">'a'</span>;</div><div class="line">      <span class="keyword">if</span>( <span class="keyword">null</span> == r.children[index] )&#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">      &#125;<span class="keyword">else</span>&#123;</div><div class="line">        r = r.children[index];</div><div class="line">        ++count;</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">boolean</span> res = count == end - start &amp;&amp; r.hasWord;</div><div class="line">    <span class="keyword">return</span> res;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">wordBreak</span><span class="params">(String s, List&lt;String&gt; wordDict)</span> </span>&#123;</div><div class="line">  <span class="keyword">char</span>[] c = s.toCharArray();</div><div class="line">  <span class="keyword">int</span> n = c.length;</div><div class="line">  <span class="comment">// 为wordDict建立trie树</span></div><div class="line">  Trie trie = <span class="keyword">new</span> Trie();</div><div class="line">  <span class="keyword">for</span>( String w : wordDict )&#123;</div><div class="line">    trie.add(w);</div><div class="line">  &#125;</div><div class="line">  <span class="comment">//状态f[i]:单词0~i是否能被break</span></div><div class="line">  <span class="keyword">boolean</span>[] f = <span class="keyword">new</span> <span class="keyword">boolean</span>[n+<span class="number">1</span>];</div><div class="line">  <span class="comment">//初始化</span></div><div class="line">  f[<span class="number">0</span>] = <span class="keyword">true</span>;</div><div class="line">  <span class="comment">//dp</span></div><div class="line">  <span class="keyword">int</span> i,j;</div><div class="line">  <span class="comment">//O(N*L*L)</span></div><div class="line">  <span class="keyword">for</span>( i = <span class="number">1</span> ; i &lt;= n ; ++i )&#123; <span class="comment">// O(N) </span></div><div class="line">    <span class="keyword">for</span>( j = i ; j &gt;= <span class="number">0</span> ; --j )&#123;<span class="comment">//从后往前搜索,O(L)</span></div><div class="line">      <span class="keyword">if</span>( f[j] &amp;&amp; trie.search(c,j,i) )&#123;<span class="comment">//O(L)</span></div><div class="line">        f[i] = <span class="keyword">true</span>;</div><div class="line">        <span class="keyword">break</span>;</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">return</span> f[n];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="例题2，Palindrome-Partitioning-II">5.2.2. 例题2，Palindrome Partitioning II</h3><p>一个str最少被切割几次可以切割为都是回文串</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div></pre></td><td class="code"><pre><div class="line">f[i]:前i个字母，最少被切割几次可以切割为都是回文串</div><div class="line"></div><div class="line">|=======前i个位置=======|</div><div class="line">  </div><div class="line">|------------|---------|</div><div class="line">|<span class="number">1</span>,<span class="number">2</span>,......,j|j+<span class="number">1</span>,...,i|</div><div class="line">|------------|---------|</div><div class="line"></div><div class="line"> 找到一个j，使得<span class="number">1</span>~j是回文串，且j+<span class="number">1</span>~i能被分割为回文串。则f[i] = f[j] + <span class="number">1</span></div><div class="line">  </div><div class="line"> 遍历j，使得f[i] = min( f[j] + <span class="number">1</span> ) </div><div class="line">  </div><div class="line">f[<span class="number">0</span>]  = -<span class="number">1</span> <span class="comment">// 原因，f[0]代表空串，为了抵消空串和真正串的1</span></div><div class="line"><span class="comment">// 例如"aba",被切成"aba"+""，即f[aba] = 1 + f[0]，但它应该等于0.所以我们定义f[0] = -1</span></div><div class="line"></div><div class="line"><span class="keyword">for</span>( <span class="keyword">int</span> i = <span class="number">1</span> ; i &lt;= s.length ; ++i )&#123;</div><div class="line">  f[i] = Integer.MAX_VALUE; <span class="comment">//其实也可以是i-1</span></div><div class="line">  <span class="keyword">for</span>( <span class="keyword">int</span> j = <span class="number">0</span> ; j &lt; i ; ++j )&#123;</div><div class="line">    <span class="keyword">if</span>( s[j~i] is Palindrome )&#123;</div><div class="line">      f[i] = Math.min( f[i], f[j] + <span class="number">1</span> )</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">代码：</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</div><div class="line">    <span class="keyword">int</span>[][] ifPalindrome;</div><div class="line">    <span class="keyword">int</span>[] min;</div><div class="line">    <span class="comment">//判断i~j是否是回文串</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">Palindrome</span><span class="params">(<span class="keyword">char</span>[] c,<span class="keyword">int</span> i, <span class="keyword">int</span> j)</span></span>&#123;</div><div class="line">        <span class="keyword">if</span>( ifPalindrome[i][j] &gt; <span class="number">0</span> ) &#123;</div><div class="line">            <span class="keyword">return</span> ifPalindrome[i][j];</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span>( i == j )&#123;</div><div class="line">            ifPalindrome[i][j] = <span class="number">1</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">else</span> <span class="keyword">if</span>( c[i] == c[j] )&#123;</div><div class="line">            <span class="keyword">if</span>( j - i &lt; <span class="number">3</span> )&#123;</div><div class="line">                ifPalindrome[i][j] = <span class="number">1</span>;</div><div class="line">            &#125;<span class="keyword">else</span>&#123;</div><div class="line">                ifPalindrome[i][j] = ifPalindrome[i+<span class="number">1</span>][j-<span class="number">1</span>] ;</div><div class="line">            &#125;</div><div class="line">        &#125;<span class="keyword">else</span>&#123;</div><div class="line">            ifPalindrome[i][j] = <span class="number">2</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> ifPalindrome[i][j];</div><div class="line">    &#125;</div><div class="line">    <span class="comment">//dp递归</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">cut</span><span class="params">(<span class="keyword">char</span>[] c,<span class="keyword">int</span> idx, <span class="keyword">int</span> n)</span></span>&#123;</div><div class="line">        <span class="keyword">if</span>( idx &gt;= n ) &#123;<span class="keyword">return</span> <span class="number">0</span>;&#125;</div><div class="line">        <span class="keyword">if</span>( min[idx] &gt; <span class="number">0</span> )&#123; <span class="keyword">return</span> min[idx];&#125;</div><div class="line">        <span class="comment">/** idx ....,j,....,n</span></div><div class="line">         * 如果idx~j是回文，则从j切一刀，[i~n] = 1 + [j~n]**/</div><div class="line">        min[idx] = n;</div><div class="line">        <span class="keyword">for</span>( <span class="keyword">int</span> j = idx ; j &lt; n ; ++j )&#123;</div><div class="line">            <span class="keyword">if</span>( Palindrome(c,idx,j) == <span class="number">1</span> )&#123;</div><div class="line">                min[idx] = Math.min( <span class="number">1</span> + cut( c, j+<span class="number">1</span>, n ), min[idx] );</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> min[idx];</div><div class="line">    &#125;</div><div class="line">    <span class="comment">//主函数</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">minCut</span><span class="params">(String s)</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span> n = s.length();</div><div class="line">        <span class="keyword">if</span>( n &lt;= <span class="number">1</span> ) <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">        min = <span class="keyword">new</span> <span class="keyword">int</span>[n];</div><div class="line">        ifPalindrome = <span class="keyword">new</span> <span class="keyword">int</span>[n][n];</div><div class="line">        <span class="keyword">char</span>[] c = s.toCharArray();</div><div class="line">        <span class="keyword">int</span> res =  cut(c,<span class="number">0</span>,n);</div><div class="line">        <span class="keyword">return</span> res-<span class="number">1</span>; <span class="comment">// 因为到末尾的时候也切了一刀，这一刀没有必要！</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>另一种思路</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">f[i] : 前i个字符，最少可以被切为几个回文串</div></pre></td></tr></table></figure>
<p><strong>优化</strong>：判断i~j是否是回文串</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">i,i+<span class="number">1</span>.........,j-<span class="number">1</span>,j 是回文串，则</div><div class="line">i,i+<span class="number">1</span>,........,j-<span class="number">1</span>   是回文串</div><div class="line"></div><div class="line">这是一种区间型DP，或者说是一种递推</div></pre></td></tr></table></figure>
<h3 id="Palindromic-Substrings">5.2.3. Palindromic Substrings</h3><p>输出一个字符串所有的回文子串的个数。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Input: &quot;aaa&quot;</div><div class="line">Output: 6</div><div class="line">Explanation: Six palindromic strings: &quot;a&quot;, &quot;a&quot;, &quot;a&quot;, &quot;aa&quot;, &quot;aa&quot;, &quot;aaa&quot;.</div></pre></td></tr></table></figure>
<p>我的思路非常暴力：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div></pre></td><td class="code"><pre><div class="line"><span class="number">1</span>. str -&gt; <span class="keyword">char</span>[] c</div><div class="line"><span class="number">2</span>. 定义<span class="keyword">int</span>[][] ifPalindromic -&gt; ifPalindromic[i][j] = <span class="number">1</span>-&gt;是回文串，<span class="number">2</span>-&gt;不是</div><div class="line"><span class="number">3</span>. <span class="keyword">if</span> c[i] == c[j]&#123; <span class="comment">// i~j可能是回文串</span></div><div class="line">	ifPalindromic = Palindromic[i+<span class="number">1</span>][j-<span class="number">1</span>];</div><div class="line">&#125;</div><div class="line"><span class="number">4</span>. <span class="keyword">else</span>:</div><div class="line">	<span class="comment">//考察i~j-1和i+1~j</span></div><div class="line">   ifPalindromic[i+<span class="number">1</span>][j] = Palindromic(c,i+<span class="number">1</span>,j);</div><div class="line">   ifPalindromic[i][j-<span class="number">1</span>] = Palindromic(c,i,j-<span class="number">1</span>);</div><div class="line"></div><div class="line"></div><div class="line">代码：</div><div class="line"></div><div class="line"><span class="keyword">private</span> <span class="keyword">int</span>[][] ifPalindromic;</div><div class="line"><span class="keyword">int</span> count = <span class="number">0</span>; <span class="comment">//计数器</span></div><div class="line"></div><div class="line"><span class="comment">//判断start~end是不是回文串</span></div><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">Palindromic</span><span class="params">(<span class="keyword">char</span>[] c, <span class="keyword">int</span> start, <span class="keyword">int</span> end)</span></span>&#123;</div><div class="line">  <span class="keyword">if</span>( start &gt;= end )<span class="keyword">return</span> <span class="number">1</span>;</div><div class="line">  <span class="keyword">if</span>( ifPalindromic[start][end] &gt; <span class="number">0</span> )<span class="keyword">return</span> ifPalindromic[start][end];</div><div class="line">  <span class="keyword">if</span>( c[start] == c[end] )&#123;</div><div class="line">    ifPalindromic[start][end] = Palindromic(c,start+<span class="number">1</span>,end-<span class="number">1</span>);</div><div class="line">  &#125;<span class="keyword">else</span>&#123;</div><div class="line">    ifPalindromic[start][end] = <span class="number">2</span>;</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">if</span>(start+<span class="number">1</span>&lt;end)ifPalindromic[start+<span class="number">1</span>][end] = Palindromic(c,start+<span class="number">1</span>,end);</div><div class="line">  <span class="keyword">if</span>(start&lt;end-<span class="number">1</span>)ifPalindromic[start][end-<span class="number">1</span>] = Palindromic(c,start,end-<span class="number">1</span>);</div><div class="line">  <span class="keyword">if</span>( ifPalindromic[start][end] == <span class="number">1</span> )&#123;</div><div class="line">    ++count;</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">return</span> ifPalindromic[start][end];</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">countSubstrings</span><span class="params">(String s)</span> </span>&#123;</div><div class="line"></div><div class="line">  <span class="keyword">char</span>[] c = s.toCharArray();</div><div class="line">  <span class="keyword">int</span> n = c.length;</div><div class="line">  <span class="keyword">if</span>(n &lt;= <span class="number">1</span>) <span class="keyword">return</span> n;</div><div class="line">  ifPalindromic = <span class="keyword">new</span> <span class="keyword">int</span>[n][n];</div><div class="line">  <span class="comment">// 1 -&gt; true</span></div><div class="line">  <span class="comment">// 2 -&gt; false</span></div><div class="line">  <span class="keyword">for</span>( <span class="keyword">int</span> i = <span class="number">0</span> ; i &lt; n ; ++i )&#123;</div><div class="line">    ifPalindromic[i][i] = <span class="number">1</span>;</div><div class="line">  &#125;</div><div class="line">  Palindromic(c,<span class="number">0</span>,n-<span class="number">1</span>);</div><div class="line">  <span class="keyword">return</span> count+n;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>上面这种思路用自底向上的方法为：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">若    ,i+<span class="number">1</span>,...,j-<span class="number">1</span>,     是回文串 , 且c[i] == c[j]</div><div class="line">则   i,...........,j    是回文串</div><div class="line"></div><div class="line">计算过程为</div><div class="line"></div><div class="line">i是从大到小的</div><div class="line">j是从i到n的</div><div class="line"></div><div class="line">因为[i+<span class="number">1</span>][...]已经算过了</div><div class="line">因此[i][j] = ...[i+<span class="number">1</span>][j-<span class="number">1</span>]肯定能算出来</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">countSubstrings</span><span class="params">(String s)</span> </span>&#123;</div><div class="line">    <span class="keyword">int</span> n = s.length();</div><div class="line">    <span class="keyword">int</span> res = <span class="number">0</span>;</div><div class="line">    <span class="keyword">boolean</span>[][] dp = <span class="keyword">new</span> <span class="keyword">boolean</span>[n][n];</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = n - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = i; j &lt; n; j++) &#123;</div><div class="line">            dp[i][j] = s.charAt(i) == s.charAt(j) &amp;&amp; (j - i &lt; <span class="number">3</span> || dp[i + <span class="number">1</span>][j - <span class="number">1</span>]);</div><div class="line">            <span class="keyword">if</span>(dp[i][j]) ++res;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> res;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>其实还有一种更暴力，更简单的解法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">int</span> count = <span class="number">0</span>;</div><div class="line">    </div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">countSubstrings</span><span class="params">(String s)</span> </span>&#123;</div><div class="line">  <span class="keyword">if</span> (s == <span class="keyword">null</span> || s.length() == <span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line"></div><div class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; s.length(); i++) &#123; <span class="comment">// i是回文串的中点</span></div><div class="line">    extendPalindrome(s, i, i); <span class="comment">//奇数长度</span></div><div class="line">    extendPalindrome(s, i, i + <span class="number">1</span>); <span class="comment">//偶数长度</span></div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="keyword">return</span> count;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">extendPalindrome</span><span class="params">(String s, <span class="keyword">int</span> left, <span class="keyword">int</span> right)</span> </span>&#123;</div><div class="line">  <span class="keyword">while</span> (left &gt;=<span class="number">0</span> &amp;&amp; right &lt; s.length() &amp;&amp; s.charAt(left) == s.charAt(right)) &#123;</div><div class="line">    count++; left--; right++;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="House-Robber">5.2.4. House Robber</h3><p>给一个数组<code>int[] nums</code>，表示每个商店的价值。要抢劫，但抢劫时必须至少隔一个商铺抢。问能抢到的最大价值。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">rob</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span>( nums.length == <span class="number">0</span> ) <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">        <span class="comment">//状态f[i]：前i家最大价值</span></div><div class="line">        <span class="keyword">int</span>[] f = <span class="keyword">new</span> <span class="keyword">int</span>[nums.length+<span class="number">1</span>];</div><div class="line">        <span class="comment">//初始化</span></div><div class="line">        f[<span class="number">0</span>] = <span class="number">0</span>;</div><div class="line">        f[<span class="number">1</span>] = nums[<span class="number">0</span>];</div><div class="line">        <span class="comment">//DP</span></div><div class="line">        <span class="keyword">for</span>( <span class="keyword">int</span> i = <span class="number">1</span> ; i &lt; nums.length ; ++i )&#123;</div><div class="line">            f[i+<span class="number">1</span>] = Math.max(f[i],f[i-<span class="number">1</span>]+nums[i]);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> f[nums.length];</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<h3 id="House-Robber-II">5.2.5. House Robber II</h3><p>给一个数组<code>int[] nums</code>，表示每个商店的价值。商店是成环的，即首尾相接。要抢劫，但抢劫时必须至少隔一个商铺抢。问能抢到的最大价值。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">[<span class="number">1</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">6</span>,<span class="number">2</span>,<span class="number">5</span>]</div><div class="line">其实成环的商店如果去掉首/尾某个的话，就不成环了，就变成了上一题。</div><div class="line">  <span class="number">1</span> <span class="number">3</span> 	</div><div class="line"><span class="number">5</span>     <span class="number">4</span></div><div class="line">  <span class="number">2</span> <span class="number">6</span></div><div class="line">  </div><div class="line">例如这个环，</div><div class="line">假设肯定不抢<span class="number">1</span>：变成了[<span class="number">3</span>,<span class="number">4</span>,<span class="number">6</span>,<span class="number">2</span>,<span class="number">5</span>]</div><div class="line">假设肯定不抢<span class="number">5</span>：变成了[<span class="number">1</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">6</span>,<span class="number">2</span>]</div></pre></td></tr></table></figure>
<h3 id="Maximal-Square">5.2.6. Maximal Square</h3><p>给一个0/1矩阵。找到最大全1方阵，返回方阵元素个数。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">1 0 1 0 0</div><div class="line">1 0 1 1 1</div><div class="line">1 1 1 1 1</div><div class="line">1 0 0 1 0  </div><div class="line"></div><div class="line">-&gt; return 4</div></pre></td></tr></table></figure>
<p>这道题我使用了一种较笨的方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div></pre></td><td class="code"><pre><div class="line">count[i][j] : 当前格子的左上角有多少行/列全<span class="number">1</span>方阵</div><div class="line"></div><div class="line">[i,j]</div><div class="line">x x x x          x</div><div class="line">x x x x          x</div><div class="line">x x x x          x</div><div class="line">x x x c[i-<span class="number">1</span>,j-<span class="number">1</span>] x</div><div class="line">x x x x          <span class="number">1</span> &lt;- [i,j]</div><div class="line"></div><div class="line">如果 c[i-<span class="number">1</span>,j-<span class="number">1</span>] == <span class="number">1</span>，那必须是以下这样时，c[i,j] = <span class="number">1</span> + <span class="number">1</span> = <span class="number">1</span></div><div class="line">x x x x x</div><div class="line">x x x x x</div><div class="line">x x x x x</div><div class="line">x x x <span class="number">1</span> <span class="number">1</span></div><div class="line">x x x <span class="number">1</span> <span class="number">1</span> &lt;- [i,j]</div><div class="line"></div><div class="line">如果 c[i-<span class="number">1</span>,j-<span class="number">1</span>] == <span class="number">2</span>，那必须是以下这样时，c[i,j] = <span class="number">1</span> + <span class="number">2</span> = <span class="number">3</span></div><div class="line">x x x x x</div><div class="line">x x x x x</div><div class="line">x x x x <span class="number">1</span></div><div class="line">x x x <span class="number">1</span> <span class="number">1</span></div><div class="line">x x <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> &lt;- [i,j]</div><div class="line"></div><div class="line">或者这样，c[i,j] = <span class="number">1</span> + <span class="number">1</span> = <span class="number">1</span></div><div class="line">x x x x x</div><div class="line">x x x x x</div><div class="line">x x x x <span class="number">0</span></div><div class="line">x x x <span class="number">1</span> <span class="number">1</span></div><div class="line">x x <span class="number">0</span> <span class="number">1</span> <span class="number">1</span> &lt;- [i,j]</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">maximalSquare</span><span class="params">(<span class="keyword">char</span>[][] matrix)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span>( matrix.length == <span class="number">0</span> || matrix[<span class="number">0</span>].length == <span class="number">0</span> )<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">        <span class="keyword">int</span> max = -<span class="number">1</span>;</div><div class="line">        <span class="keyword">int</span>[][] counter = <span class="keyword">new</span> <span class="keyword">int</span>[matrix.length][matrix[<span class="number">0</span>].length];</div><div class="line">        <span class="keyword">int</span> i,j;</div><div class="line">        <span class="keyword">for</span>( i = <span class="number">0</span> ; i &lt; matrix.length ; ++i )&#123;</div><div class="line">            counter[i][<span class="number">0</span>] = (<span class="keyword">int</span>) matrix[i][<span class="number">0</span>] - <span class="number">48</span>;</div><div class="line">            max = Math.max(max,counter[i][<span class="number">0</span>]);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">for</span>( j = <span class="number">0</span> ; j &lt; matrix[<span class="number">0</span>].length ; ++j )&#123;</div><div class="line">            counter[<span class="number">0</span>][j] = (<span class="keyword">int</span>) matrix[<span class="number">0</span>][j] - <span class="number">48</span>;</div><div class="line">            max = Math.max(max,counter[<span class="number">0</span>][j]);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">int</span> k,q;</div><div class="line">        <span class="keyword">for</span>( i = <span class="number">1</span> ; i &lt; matrix.length ; ++i )&#123;</div><div class="line">            <span class="keyword">for</span>( j = <span class="number">1</span>; j &lt; matrix[i].length ; ++j )&#123;</div><div class="line">                <span class="keyword">if</span>( matrix[i][j] == <span class="string">'0'</span> ) <span class="keyword">continue</span>;</div><div class="line">                counter[i][j] = <span class="number">1</span>;</div><div class="line">                k = counter[i-<span class="number">1</span>][j-<span class="number">1</span>];</div><div class="line">                <span class="keyword">for</span>( q = <span class="number">1</span> ; q &lt;= k ; ++q )&#123;</div><div class="line">                    <span class="keyword">if</span>( matrix[i-q][j] != <span class="string">'1'</span> || matrix[i][j-q] !=<span class="string">'1'</span> )&#123;</div><div class="line">                        <span class="keyword">break</span>;</div><div class="line">                    &#125;<span class="keyword">else</span>&#123;</div><div class="line">                        counter[i][j] += <span class="number">1</span>;</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">                max = Math.max(max, counter[i][j]);</div><div class="line"></div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> max*max;</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<p>事实上，有一种非常非常机智的方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; m; i++) &#123;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt; n; j++) &#123;</div><div class="line">            <span class="keyword">if</span> (matrix[i][j] == <span class="string">'1'</span>) &#123;</div><div class="line">                size[i][j] = min(size[i - <span class="number">1</span>][j - <span class="number">1</span>], min(size[i - <span class="number">1</span>][j], size[i][j - <span class="number">1</span>])) + <span class="number">1</span>;</div><div class="line">                maxsize = max(maxsize, size[i][j]);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<p>还有一种更机智的方法。由于<code>f[i][j]</code>只和前3个结果相关</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">f[i - <span class="number">1</span>][j - <span class="number">1</span>]    f[i][j - <span class="number">1</span>]</div><div class="line">f[i - <span class="number">1</span>][j]        f[i][j]</div></pre></td></tr></table></figure>
<p>故只需要保留一个2行的数组！！！<br>列上不能优化，因为2重循环的时候 下列的时候依赖于上列的结果，上列的结果需要保存到计算下列的时候用</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">int</span> ans = <span class="number">0</span>;  </div><div class="line">    <span class="keyword">if</span> (matrix == <span class="keyword">null</span> || matrix.length == <span class="number">0</span> || matrix[<span class="number">0</span>].length == <span class="number">0</span>) &#123;  </div><div class="line">        <span class="keyword">return</span> ans;  </div><div class="line">    &#125;  </div><div class="line">    <span class="keyword">int</span> n = <span class="number">2</span>;  </div><div class="line">    <span class="keyword">int</span> m = matrix[<span class="number">0</span>].length;  </div><div class="line">      </div><div class="line">    <span class="comment">// 状态  </span></div><div class="line">    <span class="keyword">int</span>[][] f = <span class="keyword">new</span> <span class="keyword">int</span>[n][m];   <span class="comment">// 2行，m列</span></div><div class="line">    <span class="comment">// 初始化  </span></div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;  </div><div class="line">        f[i][<span class="number">0</span>] = matrix[i][<span class="number">0</span>];  </div><div class="line">        ans = Math.max(f[i][<span class="number">0</span>], ans);  </div><div class="line">    &#125;  </div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m; i++) &#123;  </div><div class="line">        f[<span class="number">0</span>][i] = matrix[<span class="number">0</span>][i];  </div><div class="line">        ans = Math.max(f[<span class="number">0</span>][i], ans);  </div><div class="line">    &#125;  </div><div class="line">    <span class="comment">// 方程  </span></div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; matrix.length; i++) &#123;  </div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt; m; j++) &#123;  </div><div class="line">            <span class="keyword">if</span> (matrix[i][j] == <span class="number">1</span>) &#123;  </div><div class="line">                f[i%<span class="number">2</span>][j] = Math.min(Math.min(f[(i-<span class="number">1</span>)%<span class="number">2</span>][j-<span class="number">1</span>], f[i%<span class="number">2</span>][j-<span class="number">1</span>]), f[(i-<span class="number">1</span>)%<span class="number">2</span>][j]) + <span class="number">1</span>;  </div><div class="line">            &#125; <span class="keyword">else</span> &#123;  </div><div class="line">                f[i%<span class="number">2</span>][j] = <span class="number">0</span>;  </div><div class="line">            &#125;  </div><div class="line">            ans = Math.max(ans, f[i%<span class="number">2</span>][j]);  </div><div class="line">        &#125;  </div><div class="line">    &#125;  </div><div class="line">    <span class="comment">// 结果  </span></div><div class="line">    <span class="keyword">return</span> ans * ans;</div></pre></td></tr></table></figure>
<h3 id="Paint-House">5.2.7. Paint House</h3><p>给一个二维数组<code>cost[][]</code>，大小为n×3。其中<code>cost[i][q]</code>表示第i个房子涂上第q种颜色时的造价。一共有3种颜色。要求两个相邻房子不可以同色。求涂色最小造价</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="number">0</span>,<span class="number">1</span>,...,|i-<span class="number">1</span>| i |,.....</div><div class="line">        |   | g |</div><div class="line">        | r | b |</div><div class="line">        ---------</div><div class="line">        | g | r |</div><div class="line">        |   | b |</div><div class="line">        ---------</div><div class="line">        | b | r |</div><div class="line">        |   | g |</div><div class="line"></div><div class="line">如上图所示，涂第i个房子的时候，取决于第i-<span class="number">1</span>个房子是什么颜色</div><div class="line"></div><div class="line">而第<span class="number">0</span>~i个房子的总最小造价，一定是第i个房子涂r/g/b颜色时的最小值</div><div class="line"></div><div class="line">那我们可以假设我们已知第i-<span class="number">1</span>个房子涂r/g/b时最小造价，就可以推出第i个房子涂r/g/b时最小造价</div><div class="line"></div><div class="line">total[i][q] = Math.min(</div><div class="line">  				total[i-<span class="number">1</span>][<span class="number">0</span>] + cost[i][<span class="number">1</span>],</div><div class="line">  				total[i-<span class="number">1</span>][<span class="number">0</span>] + cost[i][<span class="number">2</span>],</div><div class="line">  </div><div class="line">  				total[i-<span class="number">1</span>][<span class="number">1</span>] + cost[i][<span class="number">2</span>],</div><div class="line">  				total[i-<span class="number">1</span>][<span class="number">1</span>] + cost[i][<span class="number">0</span>],</div><div class="line">  </div><div class="line">  				total[i-<span class="number">1</span>][<span class="number">2</span>] + cost[i][<span class="number">0</span>],</div><div class="line">  				total[i-<span class="number">1</span>][<span class="number">2</span>] + cost[i][<span class="number">1</span>]</div><div class="line">					)</div><div class="line">  </div><div class="line">将上面这个式子换一种形式：</div><div class="line">total[i][q] = Math.min(</div><div class="line">  Math.min(</div><div class="line">    total[i-<span class="number">1</span>][<span class="number">1</span>] + cost[i][<span class="number">0</span>], --&gt; 第i个房子颜色为<span class="number">0</span>的min</div><div class="line">  	total[i-<span class="number">1</span>][<span class="number">2</span>] + cost[i][<span class="number">0</span>]), </div><div class="line"></div><div class="line">  Math.min(</div><div class="line">    total[i-<span class="number">1</span>][<span class="number">0</span>] + cost[i][<span class="number">1</span>], --&gt; 第i个房子颜色为<span class="number">1</span>的min</div><div class="line">  	total[i-<span class="number">1</span>][<span class="number">2</span>] + cost[i][<span class="number">1</span>]), --&gt;</div><div class="line"></div><div class="line">  Math.min(</div><div class="line">    total[i-<span class="number">1</span>][<span class="number">0</span>] + cost[i][<span class="number">2</span>], --&gt; 第i个房子颜色为<span class="number">2</span>的min</div><div class="line">  	total[i-<span class="number">1</span>][<span class="number">1</span>] + cost[i][<span class="number">2</span>])  --&gt;</div><div class="line">					)</div><div class="line"></div><div class="line">  实现：</div><div class="line">  </div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">minCost</span><span class="params">(<span class="keyword">int</span>[][] costs)</span> </span>&#123;</div><div class="line">  <span class="keyword">if</span>( costs.length == <span class="number">0</span> || costs[<span class="number">0</span>].length == <span class="number">0</span> ) <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">  <span class="comment">//状态total[i][q]表示第i个房子在涂第q种颜色时，前i个房子的的最小cost</span></div><div class="line">  <span class="comment">// 0 -&gt; red</span></div><div class="line">  <span class="comment">// 1 -&gt; blue</span></div><div class="line">  <span class="comment">// 2 -&gt; green</span></div><div class="line">  <span class="keyword">int</span> n = costs.length;</div><div class="line">  <span class="keyword">int</span>[][] total = <span class="keyword">new</span> <span class="keyword">int</span>[n][costs[<span class="number">0</span>].length];</div><div class="line"></div><div class="line">  <span class="comment">//初始化</span></div><div class="line">  <span class="keyword">for</span>(<span class="keyword">int</span> q = <span class="number">0</span> ; q &lt; <span class="number">3</span> ; ++q )&#123;</div><div class="line">    total[<span class="number">0</span>][q] = costs[<span class="number">0</span>][q];</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">for</span>( <span class="keyword">int</span> i = <span class="number">1</span> ; i &lt; n ; ++i )&#123;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> q = <span class="number">0</span> ; q &lt; <span class="number">3</span> ; ++q )&#123;</div><div class="line">      total[i][q] = Integer.MAX_VALUE;</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">  <span class="comment">//dp</span></div><div class="line">  <span class="keyword">for</span>( <span class="keyword">int</span> i = <span class="number">1</span> ; i &lt; n ; ++i )&#123;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> q = <span class="number">0</span> ; q &lt; <span class="number">3</span> ; ++q )&#123;</div><div class="line">      total[i][q] = Math.min(total[i][q],costs[i][q] + total[i-<span class="number">1</span>][(q+<span class="number">1</span>)%<span class="number">3</span>]);</div><div class="line">      total[i][q] = Math.min(total[i][q],costs[i][q] + total[i-<span class="number">1</span>][(q+<span class="number">2</span>)%<span class="number">3</span>]);</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">  n -= <span class="number">1</span>;</div><div class="line">  <span class="keyword">int</span> res = Math.min(total[n][<span class="number">0</span>],total[n][<span class="number">1</span>]);</div><div class="line">  res =Math.min(res,total[n][<span class="number">2</span>]);</div><div class="line">  <span class="keyword">return</span> res;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>上面这个空间复杂度是$O(n)$,时间复杂度是$O(n)$。其实还有优化方法，将空间复杂度降为$O(1)$：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">minCost</span><span class="params">(<span class="keyword">int</span>[][] costs)</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span>(costs==<span class="keyword">null</span>||costs.length==<span class="number">0</span>)&#123;</div><div class="line">        <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;costs.length; i++)&#123;</div><div class="line">        costs[i][<span class="number">0</span>] += Math.min(costs[i-<span class="number">1</span>][<span class="number">1</span>],costs[i-<span class="number">1</span>][<span class="number">2</span>]);</div><div class="line">        costs[i][<span class="number">1</span>] += Math.min(costs[i-<span class="number">1</span>][<span class="number">0</span>],costs[i-<span class="number">1</span>][<span class="number">2</span>]);</div><div class="line">        costs[i][<span class="number">2</span>] += Math.min(costs[i-<span class="number">1</span>][<span class="number">1</span>],costs[i-<span class="number">1</span>][<span class="number">0</span>]);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">int</span> n = costs.length-<span class="number">1</span>;</div><div class="line">    <span class="keyword">return</span> Math.min(Math.min(costs[n][<span class="number">0</span>], costs[n][<span class="number">1</span>]), costs[n][<span class="number">2</span>]);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="双序列动态规划">5.3. 双序列动态规划</h2><p>给了两个串，研究两个串之间的关系</p>
<p><strong>状态</strong>：<code>f[i][j]</code>代表第一个sequence的前i个数字/字符，配上第二个sequence的前j个…</p>
<p><strong>方程</strong>：<code>f[i][j]</code>=研究第i和第j之间的匹配关系</p>
<p><strong>初始化</strong>：<code>f[i][0]</code>和<code>f[0][i]</code></p>
<p><strong>答案</strong>：<code>f[n][m]</code></p>
<p>n = s1.length()</p>
<p>m = s2.length()</p>
<h3 id="例题1，Longest-Common-Subsequence">5.3.1. 例题1，Longest Common Subsequence</h3><p>最长公共子序列</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div></pre></td><td class="code"><pre><div class="line">子问题的概念</div><div class="line"></div><div class="line">例如刚才的longest increasing subsequence问题，先求leet，再求leetcode</div><div class="line"></div><div class="line">这个问题，可以这么考虑：</div><div class="line"></div><div class="line">s1 = abcd</div><div class="line">s2 = acde</div><div class="line"></div><div class="line">ab</div><div class="line">ac</div><div class="line"></div><div class="line">ab</div><div class="line">acd</div><div class="line"></div><div class="line">ab</div><div class="line">acde</div><div class="line"></div><div class="line">abc</div><div class="line">acd</div><div class="line"></div><div class="line">abc</div><div class="line">acde</div><div class="line"></div><div class="line">abcd</div><div class="line">acde</div><div class="line"></div><div class="line">最后要求的是f[abcd][acde] = ?  --&gt; f[<span class="number">4</span>][<span class="number">4</span>] = ?</div><div class="line">    </div><div class="line">   i</div><div class="line">   ↓</div><div class="line">abcd...</div><div class="line">acde...</div><div class="line">   ↑</div><div class="line">   j</div><div class="line">   </div><div class="line">想要计算f[i][j] -&gt; 字符串<span class="number">0</span>~i配上字符串<span class="number">0</span>~j的LCS是多少？</div><div class="line"></div><div class="line">如果最后一个字符一样，和另一种不一样，是两种情况。</div><div class="line"></div><div class="line"><span class="number">1</span>. 如果不一样，当然不能都扔了。考虑扔掉一个试试。即考虑f[i][j-<span class="number">1</span>]或f[i-<span class="number">1</span>][j]。即：</div><div class="line">  <span class="keyword">if</span> a[i-<span class="number">1</span>]!=b[j-<span class="number">1</span>]</div><div class="line">      f[i][j] = Math.max(</div><div class="line">    	f[i-<span class="number">1</span>][j],<span class="comment">//i不在LCS里</span></div><div class="line">    	f[i][j-<span class="number">1</span>],<span class="comment">//j不在LCS里</span></div><div class="line">  		f[i-<span class="number">1</span>][j-<span class="number">1</span>])<span class="comment">//都不在 (其实这个已经包含在前两个里)</span></div><div class="line"><span class="number">2</span>. 如果一样：就把两个都去掉试试(其实也可以去掉一个试试)</div><div class="line">  <span class="keyword">else</span>:</div><div class="line">      f[i][j] = Math.max(</div><div class="line">      	f[i-<span class="number">1</span>][j-<span class="number">1</span>] + <span class="number">1</span>,<span class="comment">//都不在</span></div><div class="line">        f[i][j-<span class="number">1</span>],<span class="comment">//j不在LCS里(其实这个已经在第一个里了，这是一种贪心的思路)</span></div><div class="line">        f[i-<span class="number">1</span>][j]<span class="comment">//i不在LCS里(其实这个已经在第一个里了)</span></div><div class="line">      	)</div><div class="line"><span class="keyword">return</span> f[n][m]</div></pre></td></tr></table></figure>
<h3 id="例题2，Edit-Distance">5.3.2. 例题2，Edit Distance</h3><p>将第一个字符串最少改动，变成第二个字符串</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div></pre></td><td class="code"><pre><div class="line">s1 = <span class="string">"mart"</span>;</div><div class="line">s2 = <span class="string">"karma"</span>;</div><div class="line"><span class="keyword">return</span> <span class="number">3</span></div><div class="line"></div><div class="line">f[i][j] ： s1的前i个字符配上s2的前j个字符的LCS长度</div><div class="line">  </div><div class="line"><span class="keyword">if</span> 最后一个字符不等：</div><div class="line">	f[i][j] = Math.min(</div><div class="line">      <span class="comment">//直接把不等的这一位替换 -&gt; 将s1[i]替换为s2[j]</span></div><div class="line">      <span class="comment">// s1 =  mart -&gt;  mar|a</span></div><div class="line">      <span class="comment">// s2 = karma -&gt; karm|a</span></div><div class="line">      f[i-<span class="number">1</span>][j-<span class="number">1</span>] + <span class="number">1</span>, <span class="comment">//+1指替换这个字符的操作</span></div><div class="line">      </div><div class="line">      <span class="comment">//给s1添加一个s2[j]，并将s2错一位 -&gt; 在s1的i位置插入s2[j]</span></div><div class="line">      <span class="comment">// s1 =  mart -&gt; mart |a</span></div><div class="line">      <span class="comment">// s2 = karma -&gt; karm |a</span></div><div class="line">      f[i][j-<span class="number">1</span>] + <span class="number">1</span> ,</div><div class="line">      </div><div class="line">      <span class="comment">// 将s1错一位  -&gt; 删除s1[i]</span></div><div class="line">      <span class="comment">// s1 =  mart -&gt;   mar |t</span></div><div class="line">      <span class="comment">// s2 = karma -&gt; karma</span></div><div class="line">      f[i-<span class="number">1</span>][j] + <span class="number">1</span>)</div><div class="line"><span class="keyword">else</span>:</div><div class="line">      f[i][j] = Math.min(</div><div class="line">      <span class="comment">//将相等的这一位保留</span></div><div class="line">      <span class="comment">// s1 =  mart -&gt;  mar|t</span></div><div class="line">      <span class="comment">// s2 =  kart -&gt;  kar|t</span></div><div class="line">      f[i][j] = f[i-<span class="number">1</span>][j-<span class="number">1</span>],</div><div class="line">        </div><div class="line">      <span class="comment">//将相等的一位放弃，并在之后插入一个与之一样的(其实已经包含在第一种)</span></div><div class="line">      <span class="comment">// s1 =  mart -&gt;  martt</span></div><div class="line">      <span class="comment">// s2 =  kart -&gt;   kart</span></div><div class="line">      f[i][j] = f[i][j-<span class="number">1</span>] + <span class="number">1</span>,</div><div class="line">        </div><div class="line">      <span class="comment">//将相等的一位删除(其实已经包含在第一种)</span></div><div class="line">      <span class="comment">// s1 =  mart -&gt;   mar</span></div><div class="line">      <span class="comment">// s2 =  kart -&gt;  kart</span></div><div class="line">      f[i][j] = f[i-<span class="number">1</span>][j] + <span class="number">1</span></div><div class="line">      )</div><div class="line">      </div><div class="line">初始化：</div><div class="line"></div><div class="line">f[i][<span class="number">0</span>] = <span class="number">0</span>, f[<span class="number">0</span>][j] = <span class="number">0</span></div><div class="line">     </div><div class="line">        </div><div class="line">答案：</div><div class="line">f[n][m]</div><div class="line"></div><div class="line">代码</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">minDistance</span><span class="params">(String word1, String word2)</span> </span>&#123;</div><div class="line">        <span class="keyword">char</span>[] c1 = word1.toCharArray();</div><div class="line">        <span class="keyword">char</span>[] c2 = word2.toCharArray();</div><div class="line">        <span class="keyword">int</span> n1 = c1.length;</div><div class="line">        <span class="keyword">int</span> n2 = c2.length;</div><div class="line">        <span class="comment">//min[i][j] ： s1的前i个字符配上s2的前j个字符的最少改动次数</span></div><div class="line">        ++n1;</div><div class="line">        ++n2;</div><div class="line">        <span class="keyword">int</span>[][] min = <span class="keyword">new</span> <span class="keyword">int</span>[n1][n2];</div><div class="line">        <span class="comment">//初始化</span></div><div class="line">        min[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">0</span>;</div><div class="line">        <span class="keyword">for</span>( <span class="keyword">int</span> i = <span class="number">1</span> ; i &lt; n1 ; ++i )&#123;</div><div class="line">            min[i][<span class="number">0</span>] = i;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">for</span>( <span class="keyword">int</span> j = <span class="number">1</span> ; j &lt; n2; ++j )&#123;</div><div class="line">            min[<span class="number">0</span>][j] = j;</div><div class="line">        &#125;</div><div class="line">        <span class="comment">//dp</span></div><div class="line">        <span class="keyword">for</span>( <span class="keyword">int</span> i = <span class="number">1</span> ; i &lt; n1 ; ++i )&#123;</div><div class="line">            <span class="keyword">for</span>( <span class="keyword">int</span> j = <span class="number">1</span> ; j &lt; n2 ; ++j )&#123;</div><div class="line">                min[i][j] = n2;</div><div class="line">                <span class="keyword">if</span>( c1[i-<span class="number">1</span>] == c2[j-<span class="number">1</span>] )&#123;</div><div class="line">                    <span class="comment">//s1 = "...t"</span></div><div class="line">                    <span class="comment">//s2 = "...t"</span></div><div class="line">                    min[i][j] = Math.min( min[i-<span class="number">1</span>][j-<span class="number">1</span>] , <span class="comment">//相等</span></div><div class="line">                                Math.min(min[i][j-<span class="number">1</span>] + <span class="number">1</span>, <span class="comment">// 在s1[i]后添加s2[j]</span></div><div class="line">                                         min[i-<span class="number">1</span>][j] + <span class="number">1</span>) );  <span class="comment">// 删s1[i]</span></div><div class="line">                &#125;<span class="keyword">else</span>&#123;</div><div class="line">                    <span class="comment">// s1 = "....a"</span></div><div class="line">                    <span class="comment">// s2 = "....b"</span></div><div class="line">                    min[i][j] = Math.min(min[i-<span class="number">1</span>][j-<span class="number">1</span>] + <span class="number">1</span>, <span class="comment">// 用s2[j]替换s1[i]</span></div><div class="line">                                Math.min(min[i][j-<span class="number">1</span>] + <span class="number">1</span>,  <span class="comment">// 在s1后添加s[j]</span></div><div class="line">                                         min[i-<span class="number">1</span>][j] + <span class="number">1</span>));   <span class="comment">// 删s1[i]</span></div><div class="line"></div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> min[n1-<span class="number">1</span>][n2-<span class="number">1</span>];</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<h3 id="例题3，Distinct-Subsequences">5.3.3. 例题3，Distinct Subsequences</h3><p>从S=”rabbbit”挑出T = “rabbit”有几种挑法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div></pre></td><td class="code"><pre><div class="line">状态：f[i][j]</div><div class="line">	S的“前i”个字符中选取T的前j个字符，有多少种方案</div><div class="line"></div><div class="line">方程：</div><div class="line"></div><div class="line">最后一位相等：</div><div class="line">S = rabb  ---- i</div><div class="line">T =  rab  ---- j</div><div class="line">f[i][j] = 有几种方案 ：</div><div class="line"><span class="number">1</span>. f[i-<span class="number">1</span>][j-<span class="number">1</span>] + <span class="number">1</span>  <span class="comment">// 匹配上i和j</span></div><div class="line">  S = rab | b</div><div class="line">  T =  ra | b</div><div class="line"><span class="number">2</span>. f[i-<span class="number">1</span>][j]   <span class="comment">//不要i</span></div><div class="line">  S = rab | b</div><div class="line">  T = rab</div><div class="line">  </div><div class="line">  </div><div class="line">最后一位不等：</div><div class="line">S = rabbbi  ---- i</div><div class="line">T = rab     ---- j</div><div class="line">直接扔掉S最后一位f[i][j] = f[i-<span class="number">1</span>][j]</div><div class="line"></div><div class="line"></div><div class="line">初始化：</div><div class="line"></div><div class="line">f[i][<span class="number">0</span>] = <span class="number">1</span> <span class="comment">// 空串</span></div><div class="line">f[<span class="number">0</span>][j] = <span class="number">0</span>,j&gt;<span class="number">0</span></div><div class="line"></div><div class="line">答案：f[n][m]</div><div class="line"></div><div class="line">代码：</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">numDistinct</span><span class="params">(String s, String t)</span> </span>&#123;</div><div class="line">        <span class="keyword">char</span>[] cS = s.toCharArray();</div><div class="line">        <span class="keyword">char</span>[] cT = t.toCharArray();</div><div class="line">        <span class="keyword">int</span> nS = cS.length + <span class="number">1</span>;</div><div class="line">        <span class="keyword">int</span> nT = cT.length + <span class="number">1</span>;</div><div class="line">        <span class="keyword">if</span>( nS == <span class="number">1</span> &amp;&amp; nT &gt; <span class="number">1</span> ) <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">        <span class="keyword">if</span>( nT == <span class="number">1</span> ) <span class="keyword">return</span> <span class="number">1</span>;</div><div class="line">        <span class="comment">// num[i][j] S的前i个字符，和T的前j个字符，T被S组成的可能的数目</span></div><div class="line">        <span class="keyword">int</span>[][] num = <span class="keyword">new</span> <span class="keyword">int</span>[nS][nT];</div><div class="line">        <span class="comment">//初始化</span></div><div class="line">        num[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">1</span>;</div><div class="line">        <span class="keyword">for</span>( <span class="keyword">int</span> i = <span class="number">1</span> ; i &lt; nS; ++i )&#123;</div><div class="line">            num[i][<span class="number">0</span>] = <span class="number">1</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">for</span>( <span class="keyword">int</span> j = <span class="number">1</span> ; j &lt; nT ; ++j )&#123;</div><div class="line">            num[<span class="number">0</span>][j] = <span class="number">0</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="comment">// dp</span></div><div class="line">        <span class="keyword">for</span>( <span class="keyword">int</span> i = <span class="number">1</span> ; i &lt; nS ; ++i )&#123;</div><div class="line">            <span class="keyword">for</span>( <span class="keyword">int</span> j = <span class="number">1</span> ; j &lt; nT ; ++j )&#123;</div><div class="line">                <span class="keyword">if</span>( cS[i-<span class="number">1</span>] == cT[j-<span class="number">1</span>] )&#123;</div><div class="line">                    num[i][j] = num[i-<span class="number">1</span>][j-<span class="number">1</span>]+ num[i-<span class="number">1</span>][j]; <span class="comment">// 相等</span></div><div class="line">                &#125;<span class="keyword">else</span>&#123;</div><div class="line">                    num[i][j] = num[i-<span class="number">1</span>][j];</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> num[nS-<span class="number">1</span>][nT-<span class="number">1</span>];</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<h3 id="例题4，Interleaving-String">5.3.4. 例题4，Interleaving String</h3><p>可行性问题</p>
<p>给了三个字符串s1,s2,s3.判断s3是否是由s1和s2交替组成（按顺序，且可交替着挑）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div></pre></td><td class="code"><pre><div class="line">s1 = <span class="string">"aabcc"</span>,s2 = <span class="string">"dbbca"</span></div><div class="line">s3 = <span class="string">"aadbbcbcac"</span> - &gt; <span class="keyword">true</span></div><div class="line">s3 = <span class="string">"aadbbbaccc"</span> -&gt; <span class="keyword">false</span></div><div class="line">  </div><div class="line">直观想法</div><div class="line">f[i][j][k] -- s1的前i个和s2的前j个 能不能交替组成s3的前k个</div><div class="line">k=i+j</div><div class="line"></div><div class="line">即f[i][j][i+j]  --&gt; f[i][j]</div><div class="line"></div><div class="line">倒过来看</div><div class="line"></div><div class="line">s1 = ab......i</div><div class="line">s2 = db......j</div><div class="line">s3 = aa......k</div><div class="line"></div><div class="line">f[i][j] = </div><div class="line"></div><div class="line">如果s1[i]不等于s3[i+j]：</div><div class="line"></div><div class="line"> f[i-<span class="number">1</span>][j] &amp;&amp; s1[i-<span class="number">1</span>] == s3[i+j-<span class="number">1</span>]</div><div class="line"> </div><div class="line">  或者</div><div class="line">  </div><div class="line">如果s2[j]不等于s3[i+j]:</div><div class="line">  </div><div class="line"> f[i][j-<span class="number">1</span>] &amp;&amp; s2[j-<span class="number">1</span>] == s3[i+j-<span class="number">1</span>]</div><div class="line"> </div><div class="line">否则的话，就不行了！</div><div class="line"></div><div class="line"></div><div class="line">初始化：</div><div class="line"></div><div class="line">f[i][<span class="number">0</span>] = ( s[<span class="number">0</span>....i-<span class="number">1</span>] == s3[<span class="number">0</span>...i-<span class="number">1</span>] ) <span class="comment">// 前i段只用s1</span></div><div class="line">f[<span class="number">0</span>][j] = ( s2[<span class="number">0</span>...j-<span class="number">1</span>] == s3[<span class="number">0</span>...j-<span class="number">1</span>] ) <span class="comment">// 前j段只用s2</span></div><div class="line"></div><div class="line">答案：</div><div class="line"></div><div class="line">f[n][m]</div><div class="line"></div><div class="line">n = s1.size</div><div class="line">m = s2.size</div><div class="line"></div><div class="line">代码：</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isInterleave</span><span class="params">(String s1, String s2, String s3)</span> </span>&#123;</div><div class="line">        <span class="keyword">char</span>[] c1 = s1.toCharArray(), c2 = s2.toCharArray(), c3 = s3.toCharArray();</div><div class="line">        <span class="keyword">int</span> n1 = c1.length, n2 = c2.length, n3 = c3.length;</div><div class="line">        <span class="keyword">if</span>( n3 != n1 + n2 ) <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">        ++n1;++n2;++n3;</div><div class="line">        <span class="comment">//dp[i][j] : c1[0~i]和c2[0~j]能否交替组成c3[i+j]</span></div><div class="line">        <span class="keyword">boolean</span>[][] dp = <span class="keyword">new</span> <span class="keyword">boolean</span>[n1][n2];</div><div class="line">        <span class="comment">//初始化</span></div><div class="line">        dp[<span class="number">0</span>][<span class="number">0</span>] = <span class="keyword">true</span>;</div><div class="line">        <span class="keyword">for</span>( <span class="keyword">int</span> i = <span class="number">1</span> ; i &lt; n1 ; ++i )&#123;</div><div class="line">            dp[i][<span class="number">0</span>] = c1[i-<span class="number">1</span>] == c3[i-<span class="number">1</span>] &amp;&amp; dp[i-<span class="number">1</span>][<span class="number">0</span>];</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">for</span>( <span class="keyword">int</span> j = <span class="number">1</span> ; j &lt; n2 ; ++j )&#123;</div><div class="line">            dp[<span class="number">0</span>][j] = c2[j-<span class="number">1</span>] == c3[j-<span class="number">1</span>] &amp;&amp; dp[<span class="number">0</span>][j-<span class="number">1</span>];</div><div class="line">        &#125;</div><div class="line">        <span class="comment">//dp</span></div><div class="line">        <span class="keyword">for</span>( <span class="keyword">int</span> i = <span class="number">1</span> ; i &lt; n1 ; ++i )&#123;</div><div class="line">            <span class="keyword">for</span>( <span class="keyword">int</span> j = <span class="number">1</span>; j &lt; n2; ++j )&#123;</div><div class="line">                <span class="keyword">if</span>( c1[i-<span class="number">1</span>] == c3[i + j - <span class="number">1</span>] )&#123;</div><div class="line">                    dp[i][j] = dp[i-<span class="number">1</span>][j];</div><div class="line">                &#125;</div><div class="line">                <span class="keyword">if</span>( c2[j-<span class="number">1</span>] == c3[i + j - <span class="number">1</span>] )&#123;</div><div class="line">                    dp[i][j] = dp[i][j-<span class="number">1</span>] || dp[i][j];</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> dp[n1-<span class="number">1</span>][n2-<span class="number">1</span>];</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<h3 id="Dungeon-Game">5.3.5. Dungeon Game</h3><p>英雄救美：给一个矩阵<code>int[][] dungegon</code>，每个格子正数代表能量加成，负数代表减弱能量。英雄要从左上走到右下，要求每一时刻英雄的能量不低于1.问英雄初始时最少需要多少能量。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">go</span><span class="params">(<span class="keyword">int</span> i, <span class="keyword">int</span> j, <span class="keyword">int</span>[] direct, <span class="keyword">int</span>[][] dungeon,<span class="keyword">int</span>[][] init)</span></span>&#123;</div><div class="line">  <span class="keyword">int</span> initNow;</div><div class="line">  <span class="keyword">if</span>(dungeon[i][j] &gt; init[i+direct[<span class="number">0</span>]][j+direct[<span class="number">1</span>]])&#123;</div><div class="line">    <span class="comment">// 此处能量加成，进入此处前至少具有1的能量</span></div><div class="line">    initNow = <span class="number">1</span>;</div><div class="line">  &#125;<span class="keyword">else</span> &#123;</div><div class="line">    <span class="comment">// 此处减弱能量，进入此处前必须满足下一步的能量，且至少具有1的能量</span></div><div class="line">    initNow = init[i+direct[<span class="number">0</span>]][j+direct[<span class="number">1</span>]] - dungeon[i][j];</div><div class="line">    initNow = Math.max(initNow,<span class="number">1</span>); </div><div class="line">  &#125;</div><div class="line">  <span class="keyword">return</span> initNow;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">calculateMinimumHP</span><span class="params">(<span class="keyword">int</span>[][] dungeon)</span> </span>&#123;</div><div class="line">  <span class="keyword">if</span>(dungeon.length == <span class="number">0</span> || dungeon[<span class="number">0</span>].length == <span class="number">0</span>)<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">  <span class="keyword">int</span> n = dungeon.length;<span class="keyword">int</span> m = dungeon[<span class="number">0</span>].length;</div><div class="line">  <span class="comment">// init[i][j] : 进入[i,j]前最少需要的能量</span></div><div class="line">  <span class="keyword">int</span>[][] init = <span class="keyword">new</span> <span class="keyword">int</span>[n][m];</div><div class="line">  <span class="comment">// 初始化</span></div><div class="line">  <span class="keyword">if</span>(dungeon[n-<span class="number">1</span>][m-<span class="number">1</span>] &gt; <span class="number">0</span>)&#123;</div><div class="line">    init[n-<span class="number">1</span>][m-<span class="number">1</span>] = <span class="number">1</span>;</div><div class="line">  &#125;<span class="keyword">else</span> &#123;</div><div class="line">    init[n-<span class="number">1</span>][m-<span class="number">1</span>] = -dungeon[n-<span class="number">1</span>][m-<span class="number">1</span>] + <span class="number">1</span>;</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">int</span>[] right = &#123;<span class="number">0</span>,<span class="number">1</span>&#125;;</div><div class="line">  <span class="keyword">int</span>[] down = &#123;<span class="number">1</span>,<span class="number">0</span>&#125;;</div><div class="line">  <span class="keyword">for</span>(<span class="keyword">int</span> i = n - <span class="number">2</span> ; i &gt;= <span class="number">0</span> ; --i)&#123;</div><div class="line">    init[i][m-<span class="number">1</span>] = go(i,m-<span class="number">1</span>,down,dungeon,init);</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">for</span>(<span class="keyword">int</span> j = m - <span class="number">2</span> ; j &gt;= <span class="number">0</span> ; --j)&#123;</div><div class="line">    init[n-<span class="number">1</span>][j] = go(n-<span class="number">1</span>,j,right,dungeon,init);</div><div class="line">  &#125;</div><div class="line">  <span class="comment">// dp</span></div><div class="line">  <span class="keyword">for</span>(<span class="keyword">int</span> i = n - <span class="number">2</span> ; i &gt;= <span class="number">0</span> ; --i)&#123;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j = m - <span class="number">2</span> ; j &gt;= <span class="number">0</span> ; --j)&#123;</div><div class="line">      <span class="keyword">int</span> rightInit = go(i,j,right,dungeon,init);</div><div class="line">      <span class="keyword">int</span> downInit = go(i,j,down,dungeon,init);</div><div class="line">      init[i][j] = Math.min(rightInit,downInit);</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">return</span> init[<span class="number">0</span>][<span class="number">0</span>];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="相关Leetcode题">6. 相关Leetcode题</h1><h2 id="Ugly-Number">6.1. Ugly Number</h2><p>给一个数num，判断它是不是ugly数——它的质因数只能说是2、3、5。</p>
<p>这道题一开始想复杂了，居然先列出了所有比num小的$2^i3^j5^k$的数。以至于代码变成了这样：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</div><div class="line">    <span class="keyword">int</span>[] k2;</div><div class="line">    <span class="keyword">int</span>[] k3;</div><div class="line">    <span class="keyword">int</span>[] k5;</div><div class="line">    <span class="keyword">int</span> k2_num;</div><div class="line">    <span class="keyword">int</span> k3_num;</div><div class="line">    <span class="keyword">int</span> k5_num;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span>[] setK(<span class="keyword">int</span> k_num,<span class="keyword">double</span> loge)&#123;</div><div class="line">        <span class="keyword">int</span> size = (<span class="keyword">int</span>)(loge/Math.log(k_num))+<span class="number">2</span>;</div><div class="line">        <span class="keyword">if</span>(k_num==<span class="number">2</span>)&#123;</div><div class="line">            k2_num = size;</div><div class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(k_num==<span class="number">3</span>)&#123;</div><div class="line">            k3_num = size;</div><div class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(k_num==<span class="number">5</span>)&#123;</div><div class="line">            k5_num = size;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">int</span>[] k = <span class="keyword">new</span> <span class="keyword">int</span>[size];</div><div class="line">        k[<span class="number">0</span>] = <span class="number">1</span>;</div><div class="line">        <span class="keyword">int</span> i;</div><div class="line">        <span class="keyword">for</span>( i = <span class="number">1</span>; i &lt; k.length ; ++i )&#123;</div><div class="line">            k[i] = k[i-<span class="number">1</span>]*k_num;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> k;</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">dp</span><span class="params">(<span class="keyword">int</span> num)</span></span>&#123;</div><div class="line">        <span class="keyword">int</span> i2,i3,i5;</div><div class="line">        <span class="keyword">long</span> re1,re2;</div><div class="line">        <span class="keyword">for</span>( i2 = <span class="number">0</span> ; i2 &lt; k2_num ; ++i2 )&#123;</div><div class="line">            <span class="keyword">for</span>( i3 = <span class="number">0</span> ; i3 &lt; k3_num ; ++i3 )&#123;</div><div class="line">                re1 = k2[i2] * k3[i3];</div><div class="line">                <span class="keyword">if</span>( re1 &gt; num )<span class="keyword">continue</span>;</div><div class="line">                <span class="keyword">for</span>( i5 = <span class="number">0</span> ; i5 &lt; k5_num ; ++i5 )&#123;</div><div class="line">                    re2 = re1 * k5[i5];</div><div class="line">                    <span class="keyword">if</span>( re2 &gt; num )<span class="keyword">continue</span>;</div><div class="line">                    <span class="keyword">else</span> <span class="keyword">if</span>(re2 == num)&#123;</div><div class="line">                        <span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isUgly</span><span class="params">(<span class="keyword">int</span> num)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span>(num == <span class="number">0</span> )<span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">        <span class="keyword">double</span> loge = Math.log(num);</div><div class="line">        k2 = setK(<span class="number">2</span>,loge);</div><div class="line">        k3 = setK(<span class="number">3</span>,loge);</div><div class="line">        k5 = setK(<span class="number">5</span>,loge);</div><div class="line">        <span class="keyword">return</span> dp(num);</div><div class="line"></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>但是！其实我只需要判断它能不能被2、3、5整除！！！！！！</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isUgly</span><span class="params">(<span class="keyword">int</span> num)</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span> (num&lt;=<span class="number">0</span>) <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">    <span class="keyword">if</span>(num==<span class="number">1</span>) <span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">        <span class="keyword">if</span>(num%<span class="number">2</span>==<span class="number">0</span>)</div><div class="line">            <span class="keyword">return</span> isUgly(num/<span class="number">2</span>);</div><div class="line">        <span class="keyword">if</span>(num%<span class="number">3</span>==<span class="number">0</span>)</div><div class="line">            <span class="keyword">return</span> isUgly(num/<span class="number">3</span>);</div><div class="line">        <span class="keyword">if</span>(num%<span class="number">5</span>==<span class="number">0</span>)</div><div class="line">            <span class="keyword">return</span> isUgly(num/<span class="number">5</span>);</div><div class="line">      <span class="keyword">return</span> <span class="keyword">false</span>;  </div><div class="line">    &#125;</div></pre></td></tr></table></figure>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/DP/" rel="tag"># DP</a>
          
        </div>
      

      
        
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2017/11/21/算法-DFS/" rel="next" title="算法-DFS">
                <i class="fa fa-chevron-left"></i> 算法-DFS
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2017/11/17/Java-Map/" rel="prev" title="Java-Map">
                Java-Map <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.gif"
               alt="jiayi797" />
          <p class="site-author-name" itemprop="name">jiayi797</p>
           
              <p class="site-description motion-element" itemprop="description">甲乙小朋友写字的地方</p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">88</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">18</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">30</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#理解动态规划"><span class="nav-text">1. 理解动态规划</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#方法1，DFS遍历"><span class="nav-text">1.1. 方法1，DFS遍历</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#方法2，分治法"><span class="nav-text">1.2. 方法2，分治法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#方法3，记忆化搜索"><span class="nav-text">1.3. 方法3，记忆化搜索</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#方法4，多重循环"><span class="nav-text">1.4. 方法4，多重循环</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#自顶向下"><span class="nav-text">1.4.1. 自顶向下</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#自底向上"><span class="nav-text">1.4.2. 自底向上</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#什么时候用DP"><span class="nav-text">2. 什么时候用DP</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#什么时候不用DP"><span class="nav-text">3. 什么时候不用DP</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#DP四要素"><span class="nav-text">4. DP四要素</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#常见DP"><span class="nav-text">5. 常见DP</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#坐标型（矩阵）DP"><span class="nav-text">5.1. 坐标型（矩阵）DP</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#例题1：Minimum-Path-Sum"><span class="nav-text">5.1.1. 例题1：Minimum Path Sum</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#例题2，Unique-Paths"><span class="nav-text">5.1.2. 例题2，Unique Paths</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#例题3，Unique-Paths-II"><span class="nav-text">5.1.3. 例题3，Unique Paths II</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#例题4，Climbing-Stairs"><span class="nav-text">5.1.4. 例题4，Climbing Stairs</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#例题5，Jump-Game"><span class="nav-text">5.1.5. 例题5，Jump Game</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#例题6，Jump-Game-II"><span class="nav-text">5.1.6. 例题6，Jump Game II</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#例题7，Longest-Increasing-Subsequence"><span class="nav-text">5.1.7. 例题7，Longest Increasing Subsequence</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Arithmetic-Slices"><span class="nav-text">5.1.8. Arithmetic Slices</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#单序列型动态规划"><span class="nav-text">5.2. 单序列型动态规划</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#例题1，Word-Break"><span class="nav-text">5.2.1. 例题1，Word Break</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#例题2，Palindrome-Partitioning-II"><span class="nav-text">5.2.2. 例题2，Palindrome Partitioning II</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Palindromic-Substrings"><span class="nav-text">5.2.3. Palindromic Substrings</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#House-Robber"><span class="nav-text">5.2.4. House Robber</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#House-Robber-II"><span class="nav-text">5.2.5. House Robber II</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Maximal-Square"><span class="nav-text">5.2.6. Maximal Square</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Paint-House"><span class="nav-text">5.2.7. Paint House</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#双序列动态规划"><span class="nav-text">5.3. 双序列动态规划</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#例题1，Longest-Common-Subsequence"><span class="nav-text">5.3.1. 例题1，Longest Common Subsequence</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#例题2，Edit-Distance"><span class="nav-text">5.3.2. 例题2，Edit Distance</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#例题3，Distinct-Subsequences"><span class="nav-text">5.3.3. 例题3，Distinct Subsequences</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#例题4，Interleaving-String"><span class="nav-text">5.3.4. 例题4，Interleaving String</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Dungeon-Game"><span class="nav-text">5.3.5. Dungeon Game</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#相关Leetcode题"><span class="nav-text">6. 相关Leetcode题</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Ugly-Number"><span class="nav-text">6.1. Ugly Number</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">jiayi797</span>
</div>



<div class="theme-info">
  <div class="powered-by">感谢hexo.Next</div>
  <span class="post-count">博客全站共128.7k字</span>
</div>


        
<div class="busuanzi-count">
  <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv">
      <i class="fa fa-user"></i> 访问人次
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
      
    </span>
  

  
    <span class="site-pv">
      <i class="fa fa-eye"></i> 总访问量
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
      次
    </span>
  
</div>


        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.1"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.1"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.1"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.1"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.1"></script>



  


  




	





  





  





  






  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (search_path.endsWith("json")) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  
<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script><!-- hexo-inject:begin --><!-- Begin: Injected MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({"tex2jax":{"inlineMath":[["$","$"],["\\(","\\)"]],"displayMath":[["$$","$$"]]}});
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<!-- End: Injected MathJax -->
<!-- hexo-inject:end -->


  

  

  

</body>
</html>
